(function t(n,r,e){function i(o,a){if(!r[o]){if(!n[o]){var s=typeof require=="function"&&require;if(!a&&s)return s(o,!0);if(u)return u(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[o]={exports:{}};n[o][0].call(c.exports,function(t){var r=n[o][1][t];return i(r?r:t)},c,c.exports,t,n,r,e)}return r[o].exports}var u=typeof require=="function"&&require;for(var o=0;o<e.length;o++)i(e[o]);return i})({1:[function(t,n,r){(function(t){(function(){var r,e,i,u,o,a,s,f,c,l,h,p,v,d,g,y,m,b,w,x,E,k,O,S,_,M,j,N,A,I,T,P,C,D,V,L,W,F,R,q,B,z,U,H,$,X,G,K,Z,Q,Y,J,tt,nt,rt,et,it,ut,ot,at,st,ft,ct,lt,ht,pt,vt,dt,gt,yt,mt={}.hasOwnProperty,bt=function(t,n){for(var r in n){if(mt.call(n,r))t[r]=n[r]}function e(){this.constructor=t}e.prototype=n.prototype;t.prototype=new e;t.__super__=n.prototype;return t},wt=[].slice,xt=function(t,n){return function(){return t.apply(n,arguments)}};r={toString:function(){return"Bacon"}};r.version="<version>";p=(typeof t!=="undefined"&&t!==null?t:this).Error;et=function(){};K=function(t,n){return n};z=function(t,n){return t};T=function(t){return t.slice(0)};S=function(t,n){if(!n){throw new p(t)}};M=function(t){if(!(t instanceof h)){throw new p("not an EventStream : "+t)}};A=function(t){if(!(t instanceof y)){throw new p("not an Observable : "+t)}};j=function(t){return S("not a function : "+t,k.isFunction(t))};$=function(t){return t instanceof Array};G=function(t){return t instanceof y};_=function(t){if(!$(t)){throw new p("not an array : "+t)}};N=function(t){return S("no arguments supported",t.length===0)};I=function(t){if(typeof t!=="string"){throw new p("not a string : "+t)}};k={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){var r,e,i,u;for(r=e=0,i=t.length;e<i;r=++e){u=t[r];if(n===u){return r}}return-1},indexWhere:function(t,n){var r,e,i,u;for(r=e=0,i=t.length;e<i;r=++e){u=t[r];if(n(u)){return r}}return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return t.length===0},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){var r,e,i,u;r=[];for(e=0,i=n.length;e<i;e++){u=n[e];if(t(u)){r.push(u)}}return r},map:function(t,n){var r,e,i,u;i=[];for(r=0,e=n.length;r<e;r++){u=n[r];i.push(t(u))}return i},each:function(t,n){var r,e;for(r in t){e=t[r];n(r,e)}return void 0},toArray:function(t){if($(t)){return t}else{return[t]}},contains:function(t,n){return k.indexOf(t,n)!==-1},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,n){var r,e,i;if(n==null){n=k.id}for(r=0,e=t.length;r<e;r++){i=t[r];if(!n(i)){return false}}return true},any:function(t,n){var r,e,i;if(n==null){n=k.id}for(r=0,e=t.length;r<e;r++){i=t[r];if(n(i)){return true}}return false},without:function(t,n){return k.filter(function(n){return n!==t},n)},remove:function(t,n){var r;r=k.indexOf(n,t);if(r>=0){return n.splice(r,1)}},fold:function(t,n,r){var e,i,u;for(e=0,i=t.length;e<i;e++){u=t[e];n=r(n,u)}return n},flatMap:function(t,n){return k.fold(n,[],function(n,r){return n.concat(t(r))})},cached:function(t){var n;n=g;return function(){if(n===g){n=t();t=void 0}return n}},isFunction:function(t){return typeof t==="function"},toString:function(t){var n,r,e,i;try{ut++;if(t==null){return"undefined"}else if(k.isFunction(t)){return"function"}else if($(t)){if(ut>5){return"[..]"}return"["+k.map(k.toString,t).toString()+"]"}else if((t!=null?t.toString:void 0)!=null&&t.toString!==Object.prototype.toString){return t.toString()}else if(typeof t==="object"){if(ut>5){return"{..}"}r=function(){var r;r=[];for(e in t){if(!mt.call(t,e))continue;i=function(){try{return t[e]}catch(r){n=r;return n}}();r.push(k.toString(e)+":"+k.toString(i))}return r}();return"{"+r+"}"}else{return t}}finally{ut--}}};ut=0;r._=k;E=r.UpdateBarrier=function(){var t,n,e,i,u,o,a,s,f,c,l,h,p,v;c=void 0;l=[];h={};n=[];e=0;t=function(t){if(c){return n.push(t)}else{return t()}};p=function(t,n){var r;if(c){r=h[t.id];if(r==null){r=h[t.id]=[n];return l.push(t)}else{return r.push(n)}}else{return n()}};u=function(){while(l.length>0){a(0)}return void 0};a=function(t){var n,r,e,i,u,a;i=l[t];u=i.id;a=h[u];l.splice(t,1);delete h[u];o(i);for(r=0,e=a.length;r<e;r++){n=a[r];n()}return void 0};o=function(t){var n,r,e,i,u;r=t.internalDeps();for(i=0,u=r.length;i<u;i++){n=r[i];o(n);if(h[n.id]){e=k.indexOf(l,n);a(e)}}return void 0};f=function(t,r,i,o){var a,s;if(c){return i.apply(r,o)}else{c=t;try{s=i.apply(r,o);u()}finally{c=void 0;while(e<n.length){a=n[e];e++;a()}e=0;n=[]}return s}};i=function(){if(c){return c.id}else{return void 0}};v=function(n,e){var i,u,o,a;a=false;u=false;i=function(){return u=true};o=function(){a=true;return i()};i=n.dispatcher.subscribe(function(n){return t(function(){var t;if(!a){t=e(n);if(t===r.noMore){return o()}}})});if(u){i()}return o};s=function(){return l.length>0};return{whenDoneWith:p,hasWaiters:s,inTransaction:f,currentEventId:i,wrappedSubscribe:v,afterTransaction:t}}();x=function(){function t(t,n,r){this.obs=t;this.sync=n;this.lazy=r!=null?r:false;this.queue=[]}t.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)};t.prototype.toString=function(){return this.obs.toString()};t.prototype.markEnded=function(){return this.ended=true};t.prototype.consume=function(){if(this.lazy){return{value:k.always(this.queue[0])}}else{return this.queue[0]}};t.prototype.push=function(t){return this.queue=[t]};t.prototype.mayHave=function(){return true};t.prototype.hasAtLeast=function(){return this.queue.length};t.prototype.flatten=true;return t}();o=function(t){bt(n,t);function n(){return n.__super__.constructor.apply(this,arguments)}n.prototype.consume=function(){return this.queue.shift()};n.prototype.push=function(t){return this.queue.push(t)};n.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t};n.prototype.hasAtLeast=function(t){return this.queue.length>=t};n.prototype.flatten=false;return n}(x);e=function(t){bt(n,t);function n(t){n.__super__.constructor.call(this,t,true)}n.prototype.consume=function(){var t;t=this.queue;this.queue=[];return{value:function(){return t}}};n.prototype.push=function(t){return this.queue.push(t.value())};n.prototype.hasAtLeast=function(){return true};return n}(x);x.isTrigger=function(t){if(t instanceof x){return t.sync}else{return t instanceof h}};x.fromObservable=function(t){if(t instanceof x){return t}else if(t instanceof m){return new x(t,false)}else{return new o(t,true)}};a=function(){function t(t,n,r){this.context=t;this.method=n;this.args=r;this.cached=void 0}t.prototype.deps=function(){return this.cached||(this.cached=R([this.context].concat(this.args)))};t.prototype.apply=function(t){t.desc=this;return t};t.prototype.toString=function(){return k.toString(this.context)+"."+k.toString(this.method)+"("+k.map(k.toString,this.args)+")"};return t}();V=function(){var t,n,r;n=arguments[0],r=arguments[1],t=3<=arguments.length?wt.call(arguments,2):[];if((n||r)instanceof a){return n||r}else{return new a(n,r,t)}};gt=function(){var t,n,r;t=2<=arguments.length?wt.call(arguments,0,n=arguments.length-1):(n=0,[]),r=arguments[n++];return V.apply(null,t).apply(r)};R=function(t){if($(t)){return k.flatMap(R,t)}else if(G(t)){return[t]}else if(t instanceof x){return[t.obs]}else{return[]}};yt=function(t){return function(){var n,r,e,i;e=arguments[0],n=2<=arguments.length?wt.call(arguments,1):[];if(typeof e==="object"&&n.length){r=e;i=n[0];e=function(){return r[i].apply(r,arguments)};n=n.slice(1)}return t.apply(null,[e].concat(wt.call(n)))}};Y=function(t){t=Array.prototype.slice.call(t);return J.apply(null,t)};it=function(t,n){return function(){var r;r=1<=arguments.length?wt.call(arguments,0):[];return t.apply(null,n.concat(r))}};vt=function(t){return function(n){return function(r){var e;if(r==null){return void 0}else{e=r[n];if(k.isFunction(e)){return e.apply(r,t)}else{return e}}}}};lt=function(t,n){var r,e;e=t.slice(1).split(".");r=k.map(vt(n),e);return function(n){var e,i;for(e=0,i=r.length;e<i;e++){t=r[e];n=t(n)}return n}};X=function(t){return typeof t==="string"&&t.length>1&&t.charAt(0)==="."};J=yt(function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];if(k.isFunction(n)){if(t.length){return it(n,t)}else{return n}}else if(X(n)){return lt(n,t)}else{return k.always(n)}});Q=function(t,n){return J.apply(null,[t].concat(wt.call(n)))};D=function(t,n,r,e){var i;if(n instanceof m){i=n.sampledBy(t,function(t,n){return[t,n]});return e.call(i,function(t){var n,r;n=t[0],r=t[1];return n}).map(function(t){var n,r;n=t[0],r=t[1];return r})}else{n=Q(n,r);return e.call(t,n)}};ft=function(t){var n;if(k.isFunction(t)){return t}else if(X(t)){n=ht(t);return function(t,r){return t[n](r)}}else{throw new p("not a function or a field key: "+t)}};ht=function(t){return t.slice(1)};w=function(){function t(t){this.value=t}t.prototype.getOrElse=function(){return this.value};t.prototype.get=function(){return this.value};t.prototype.filter=function(n){if(n(this.value)){return new t(this.value)}else{return g}};t.prototype.map=function(n){return new t(n(this.value))};t.prototype.forEach=function(t){return t(this.value)};t.prototype.isDefined=true;t.prototype.toArray=function(){return[this.value]};t.prototype.inspect=function(){return"Some("+this.value+")"};t.prototype.toString=function(){return this.inspect()};return t}();g={getOrElse:function(t){return t},filter:function(){return g},map:function(){return g},forEach:function(){},isDefined:false,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};pt=function(t){if(t instanceof w||t===g){return t}else{return new w(t)}};r.noMore=["<no-more>"];r.more=["<more>"];W=0;l=function(){function t(){this.id=++W}t.prototype.isEvent=function(){return true};t.prototype.isEnd=function(){return false};t.prototype.isInitial=function(){return false};t.prototype.isNext=function(){return false};t.prototype.isError=function(){return false};t.prototype.hasValue=function(){return false};t.prototype.filter=function(){return true};t.prototype.inspect=function(){return this.toString()};t.prototype.log=function(){return this.toString()};return t}();d=function(t){bt(n,t);function n(t,r){n.__super__.constructor.call(this);if(!r&&k.isFunction(t)||t instanceof n){this.valueF=t;this.valueInternal=void 0}else{this.valueF=void 0;this.valueInternal=t}}n.prototype.isNext=function(){return true};n.prototype.hasValue=function(){return true};n.prototype.value=function(){if(this.valueF instanceof n){this.valueInternal=this.valueF.value();this.valueF=void 0}else if(this.valueF){this.valueInternal=this.valueF();this.valueF=void 0}return this.valueInternal};n.prototype.fmap=function(t){var n,r;if(this.valueInternal){r=this.valueInternal;return this.apply(function(){return t(r)})}else{n=this;return this.apply(function(){return t(n.value())})}};n.prototype.apply=function(t){return new n(t)};n.prototype.filter=function(t){return t(this.value())};n.prototype.toString=function(){return k.toString(this.value())};n.prototype.log=function(){return this.value()};return n}(l);v=function(t){bt(n,t);function n(){return n.__super__.constructor.apply(this,arguments)}n.prototype.isInitial=function(){return true};n.prototype.isNext=function(){return false};n.prototype.apply=function(t){return new n(t)};n.prototype.toNext=function(){return new d(this)};return n}(d);f=function(t){bt(n,t);function n(){return n.__super__.constructor.apply(this,arguments)}n.prototype.isEnd=function(){return true};n.prototype.fmap=function(){return this};n.prototype.apply=function(){return this};n.prototype.toString=function(){return"<end>"};return n}(l);c=function(t){bt(n,t);function n(t){this.error=t}n.prototype.isError=function(){return true};n.prototype.fmap=function(){return this};n.prototype.apply=function(){return this};n.prototype.toString=function(){return"<error> "+k.toString(this.error)};return n}(l);r.Event=l;r.Initial=v;r.Next=d;r.End=f;r.Error=c;H=function(t){return new v(t,true)};rt=function(t){return new d(t,true)};L=function(){return new f};ct=function(t){if(t instanceof l){return t}else{return rt(t)}};U=0;at=function(){};y=function(){function t(t){this.id=++U;gt(t,this);this.initialDesc=this.desc}t.prototype.subscribe=function(t){return E.wrappedSubscribe(this,t)};t.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)};t.prototype.onValue=function(){var t;t=Y(arguments);this.subscribe(function(n){if(n.hasValue()){return t(n.value())}});return this};t.prototype.onValues=function(t){return this.onValue(function(n){return t.apply(null,n)})};t.prototype.onError=function(){var t;t=Y(arguments);this.subscribe(function(n){if(n.isError()){return t(n.error)}});return this};t.prototype.onEnd=function(){var t;t=Y(arguments);this.subscribe(function(n){if(n.isEnd()){return t()}});return this};t.prototype.name=function(t){this._name=t;return this};t.prototype.withDescription=function(){return V.apply(null,arguments).apply(this)};t.prototype.toString=function(){if(this._name){return this._name}else{return this.desc.toString()}};t.prototype.internalDeps=function(){return this.initialDesc.deps()};return t}();y.prototype.assign=y.prototype.onValue;y.prototype.forEach=y.prototype.onValue;y.prototype.inspect=y.prototype.toString;r.Observable=y;u=function(){function t(t){var n,r,e;if(t==null){t=[]}this.unsubscribe=xt(this.unsubscribe,this);this.unsubscribed=false;this.subscriptions=[];this.starting=[];for(n=0,r=t.length;n<r;n++){e=t[n];this.add(e)}}t.prototype.add=function(t){var n,r,e;if(this.unsubscribed){return}n=false;r=et;this.starting.push(t);e=function(e){return function(){if(e.unsubscribed){return}n=true;e.remove(r);return k.remove(t,e.starting)}}(this);r=t(this.unsubscribe,e);if(!(this.unsubscribed||n)){this.subscriptions.push(r)}else{r()}k.remove(t,this.starting);return r};t.prototype.remove=function(t){if(this.unsubscribed){return}if(k.remove(t,this.subscriptions)!==void 0){return t()}};t.prototype.unsubscribe=function(){var t,n,r,e;if(this.unsubscribed){return}this.unsubscribed=true;r=this.subscriptions;for(t=0,n=r.length;t<n;t++){e=r[t];e()}this.subscriptions=[];return this.starting=[]};t.prototype.count=function(){if(this.unsubscribed){return 0}return this.subscriptions.length+this.starting.length};t.prototype.empty=function(){return this.count()===0};return t}();r.CompositeUnsubscribe=u;s=function(){function t(t,n){this._subscribe=t;this._handleEvent=n;this.subscribe=xt(this.subscribe,this);this.handleEvent=xt(this.handleEvent,this);this.subscriptions=[];this.queue=[];this.pushing=false;this.ended=false;this.prevError=void 0;this.unsubSrc=void 0}t.prototype.hasSubscribers=function(){return this.subscriptions.length>0};t.prototype.removeSub=function(t){return this.subscriptions=k.without(t,this.subscriptions)};t.prototype.push=function(t){if(t.isEnd()){this.ended=true}return E.inTransaction(t,this,this.pushIt,[t])};t.prototype.pushToSubscriptions=function(t){var n,e,i,u,o,a;try{a=this.subscriptions;for(e=0,i=a.length;e<i;e++){o=a[e];u=o.sink(t);if(u===r.noMore||t.isEnd()){this.removeSub(o)}}return true}catch(s){n=s;this.pushing=false;this.queue=[];throw n}};t.prototype.pushIt=function(t){if(!this.pushing){if(t===this.prevError){return}if(t.isError()){this.prevError=t}this.pushing=true;this.pushToSubscriptions(t);this.pushing=false;while(this.queue.length){t=this.queue.shift();this.push(t)}if(this.hasSubscribers()){return r.more}else{this.unsubscribeFromSource();return r.noMore}}else{this.queue.push(t);return r.more}};t.prototype.handleEvent=function(t){if(this._handleEvent){return this._handleEvent(t)}else{return this.push(t)}};t.prototype.unsubscribeFromSource=function(){if(this.unsubSrc){this.unsubSrc()}return this.unsubSrc=void 0};t.prototype.subscribe=function(t){var n;if(this.ended){t(L());return et}else{j(t);n={sink:t};this.subscriptions.push(n);if(this.subscriptions.length===1){this.unsubSrc=this._subscribe(this.handleEvent);j(this.unsubSrc)}return function(t){return function(){t.removeSub(n);if(!t.hasSubscribers()){return t.unsubscribeFromSource()}}}(this)}};return t}();h=function(t){bt(n,t);function n(t,r,e){if(k.isFunction(t)){e=r;r=t;t=[]}n.__super__.constructor.call(this,t);j(r);this.dispatcher=new s(r,e);at(this)}n.prototype.toProperty=function(t){var n,e;e=arguments.length===0?g:pt(function(){return t});n=this.dispatcher;return new m(V(this,"toProperty",t),function(t){var i,u,o,a;i=false;a=et;u=r.more;o=function(){if(!i){return e.forEach(function(n){i=true;u=t(new v(n));if(u===r.noMore){a();return a=et}})}};a=n.subscribe(function(n){if(n.hasValue()){if(i&&n.isInitial()){return r.more}else{if(!n.isInitial()){o()}i=true;e=new w(n);return t(n)}}else{if(n.isEnd()){u=o()}if(u!==r.noMore){return t(n)}}});o();return a})};n.prototype.toEventStream=function(){return this};n.prototype.withHandler=function(t){return new n(V(this,"withHandler",t),this.dispatcher.subscribe,t)};return n}(y);r.EventStream=h;r.never=function(){return new h(V(r,"never"),function(t){t(L());return et})};r.when=function(){var t,n,e,i,u,o,a,s,f,c,l,p,v,d,g,y,m,b,w,O;if(arguments.length===0){return r.never()}a=arguments.length;O="when: expecting arguments in the form (Observable+,function)+";S(O,a%2===0);b=[];v=[];n=0;d=[];while(n<a){d[n]=arguments[n];d[n+1]=arguments[n+1];p=k.toArray(arguments[n]);t=P(arguments[n+1]);l={f:t,ixs:[]};w=false;for(u=0,s=p.length;u<s;u++){m=p[u];e=k.indexOf(b,m);if(!w){w=x.isTrigger(m)}if(e<0){b.push(m);e=b.length-1}g=l.ixs;for(o=0,f=g.length;o<f;o++){i=g[o];if(i.index===e){i.count++}}l.ixs.push({index:e,count:1})}S("At least one EventStream required",w||!p.length);if(p.length>0){v.push(l)}n=n+2}if(!b.length){return r.never()}b=k.map(x.fromObservable,b);c=k.any(b,function(t){return t.flatten})&&C(k.map(function(t){return t.obs},b));return y=new h(V.apply(null,[r,"when"].concat(wt.call(d))),function(t){var e,i,u,o,a,s,f;f=[];u=false;o=function(t){var r,e,i;i=t.ixs;for(r=0,e=i.length;r<e;r++){n=i[r];if(!b[n.index].hasAtLeast(n.count)){return false}}return true};i=function(t){return!t.sync||t.ended};e=function(t){var r,e,i;i=t.ixs;for(r=0,e=i.length;r<e;r++){n=i[r];if(!b[n.index].mayHave(n.count)){return true}}};a=function(t){return!t.source.flatten};s=function(s){return function(l){var h,p,d;p=function(){return E.whenDoneWith(y,h)};d=function(){var e,i,u,s,c,l;if(f.length>0){c=r.more;l=f.pop();for(i=0,u=v.length;i<u;i++){s=v[i];if(o(s)){e=function(){var t,r,e,i;e=s.ixs;i=[];for(r=0,t=e.length;r<t;r++){n=e[r];i.push(b[n.index].consume())}return i}();c=t(l.e.apply(function(){var t,n;n=function(){var n,r,i;i=[];for(r=0,n=e.length;r<n;r++){t=e[r];i.push(t.value())}return i}();return s.f.apply(s,n)}));if(f.length){f=k.filter(a,f)}if(c===r.noMore){return c}else{return d()}}}}else{return r.more}};h=function(){var n;n=d();if(u){u=false;if(k.all(b,i)||k.all(v,e)){n=r.noMore;t(L())}}if(n===r.noMore){l()}return n};return s.subscribe(function(n){var e;if(n.isEnd()){u=true;s.markEnded();p()}else if(n.isError()){e=t(n)}else{s.push(n);if(s.sync){f.push({source:s,e:n});if(c||E.hasWaiters()){p()}else{h()}}}if(e===r.noMore){l()}return e||r.more})}};return new r.CompositeUnsubscribe(function(){var t,n,r;r=[];for(t=0,n=b.length;t<n;t++){m=b[t];r.push(s(m))}return r}()).unsubscribe})};C=function(t,n){var r;if(n==null){n=[]}r=function(t){var e;if(k.contains(n,t)){return true}else{e=t.internalDeps();if(e.length){n.push(t);return k.any(e,r)}else{n.push(t);return false}}};return k.any(t,r)};P=function(t){if(k.isFunction(t)){return t}else{return k.always(t)}};r.groupSimultaneous=function(){var t,n,i;i=1<=arguments.length?wt.call(arguments,0):[];if(i.length===1&&$(i[0])){i=i[0]}n=function(){var n,r,u;u=[];for(n=0,r=i.length;n<r;n++){t=i[n];u.push(new e(t))}return u}();return gt.apply(null,[r,"groupSimultaneous"].concat(wt.call(i),[r.when(n,function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];return t})]))};b=function(t){bt(n,t);function n(t,r,e){this.property=t;this.subscribe=xt(this.subscribe,this);n.__super__.constructor.call(this,r,e);this.current=g;this.currentValueRootId=void 0;this.propertyEnded=false}n.prototype.push=function(t){if(t.isEnd()){this.propertyEnded=true}if(t.hasValue()){this.current=new w(t);this.currentValueRootId=E.currentEventId()}return n.__super__.push.call(this,t)};n.prototype.maybeSubSource=function(t,n){if(n===r.noMore){return et}else if(this.propertyEnded){t(L());return et}else{return s.prototype.subscribe.call(this,t)}};n.prototype.subscribe=function(t){var n,e,i,u;e=false;i=r.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){n=E.currentEventId();u=this.currentValueRootId;if(!this.propertyEnded&&u&&n&&n!==u){E.whenDoneWith(this.property,function(n){return function(){if(n.currentValueRootId===u){return t(H(n.current.get().value()))}}}(this));return this.maybeSubSource(t,i)}else{E.inTransaction(void 0,this,function(){return i=t(H(this.current.get().value()))},[]);return this.maybeSubSource(t,i)}}else{return this.maybeSubSource(t,i)}};return n}(s);m=function(t){bt(n,t);function n(t,r,e){if(k.isFunction(t)){e=r;r=t;t=[]}n.__super__.constructor.call(this,t);j(r);this.dispatcher=new b(this,r,e);at(this)}n.prototype.changes=function(){return new h(V(this,"changes"),function(t){return function(n){return t.dispatcher.subscribe(function(t){if(!t.isInitial()){return n(t)}})}}(this))};n.prototype.withHandler=function(t){return new n(V(this,"withHandler",t),this.dispatcher.subscribe,t)};n.prototype.toProperty=function(){N(arguments);return this};n.prototype.toEventStream=function(){return new h(V(this,"toEventStream"),function(t){return function(n){return t.dispatcher.subscribe(function(t){if(t.isInitial()){t=t.toNext()}return n(t)})}}(this))};return n}(y);r.Property=m;r.constant=function(t){return new m(V(r,"constant",t),function(n){n(H(t));n(L());return et})};r.fromBinder=function(t,n){if(n==null){n=k.id}return new h(V(r,"fromBinder",t,n),function(e){var i,u,o,a;a=false;i=false;u=function(){if(!a){if(typeof o!=="undefined"&&o!==null){o();return a=true}else{return i=true}}};o=t(function(){var t,i,o,a,s,f;t=1<=arguments.length?wt.call(arguments,0):[];f=n.apply(this,t);if(!($(f)&&k.last(f)instanceof l)){f=[f]}s=r.more;for(o=0,a=f.length;o<a;o++){i=f[o];s=e(i=ct(i));if(s===r.noMore||i.isEnd()){u();return s}}return s});if(i){u()}return u})};F=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];q=function(t){var n,r,e,i;for(n=0,r=F.length;n<r;n++){i=F[n];e=[t[i[0]],t[i[1]]];if(e[0]&&e[1]){return e}}throw new c("No suitable event methods in "+t)};r.fromEventTarget=function(t,n,e){var i,u,o;i=q(t),u=i[0],o=i[1];return gt(r,"fromEvent",t,n,r.fromBinder(function(r){u.call(t,n,r);return function(){return o.call(t,n,r)}},e))};r.fromEvent=r.fromEventTarget;r.Observable.prototype.map=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return D(this,n,t,function(t){return gt(this,"map",t,this.withHandler(function(n){return this.push(n.fmap(t))}))})};r.combineAsArray=function(){var t,n,e,i,u,o,a;a=1<=arguments.length?wt.call(arguments,0):[];if(a.length===1&&$(a[0])){a=a[0]}for(t=n=0,e=a.length;n<e;t=++n){o=a[t];if(!G(o)){a[t]=r.constant(o)}}if(a.length){u=function(){var t,n,r;r=[];for(t=0,n=a.length;t<n;t++){i=a[t];r.push(new x(i,true))}return r}();return gt.apply(null,[r,"combineAsArray"].concat(wt.call(a),[r.when(u,function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];return t}).toProperty()]))}else{return r.constant([])}};r.onValues=function(){var t,n,e;e=2<=arguments.length?wt.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++];return r.combineAsArray(e).onValues(t)};r.combineWith=function(){var t,n;t=arguments[0],n=2<=arguments.length?wt.call(arguments,1):[];return gt.apply(null,[r,"combineWith",t].concat(wt.call(n),[r.combineAsArray(n).map(function(n){return t.apply(null,n)})]))};r.combineTemplate=function(t){var n,e,i,u,o,a,s,f,c,l;s=[];l=[];a=function(t){return t[t.length-1]};c=function(t,n,r){return a(t)[n]=r};n=function(t,n){return function(r,e){return c(r,t,e[n])}};o=function(t,n){return function(r){return c(r,t,n)}};f=function(t){if($(t)){return[]}else{return{}}};i=function(t,r){var e,i;if(G(r)){l.push(r);return s.push(n(t,l.length-1))}else if(r===Object(r)&&typeof r!=="function"&&!(r instanceof RegExp)&&!(r instanceof Date)){i=function(t){return function(n){var e;e=f(r);c(n,t,e);return n.push(e)}};e=function(t){return t.pop()};s.push(i(t));u(r);return s.push(e)}else{return s.push(o(t,r))}};u=function(t){return k.each(t,i)};u(t);e=function(n){var r,e,i,u,o;o=f(t);r=[o];for(i=0,u=s.length;i<u;i++){e=s[i];e(r,n)}return o};return gt(r,"combineTemplate",t,r.combineAsArray(l).map(e))};r.Observable.prototype.combine=function(t,n){var e;e=ft(n);return gt(this,"combine",t,n,r.combineAsArray(this,t).map(function(t){return e(t[0],t[1])}))};r.Observable.prototype.decode=function(t){return gt(this,"decode",t,this.combine(r.combineTemplate(t),function(t,n){return n[t]}))};r.Observable.prototype.withStateMachine=function(t,n){var e;e=t;return gt(this,"withStateMachine",t,n,this.withHandler(function(t){var i,u,o,a,s,f,c;i=n(e,t);a=i[0],f=i[1];e=a;c=r.more;for(u=0,o=f.length;u<o;u++){s=f[u];c=this.push(s);if(c===r.noMore){return c}}return c}))};r.Observable.prototype.skipDuplicates=function(t){if(t==null){t=function(t,n){return t===n}}return gt(this,"skipDuplicates",this.withStateMachine(g,function(n,r){if(!r.hasValue()){return[n,[r]]}else if(r.isInitial()||n===g||!t(n.get(),r.value())){return[new w(r.value()),[r]]}else{return[n,[]]}}))};r.Observable.prototype.awaiting=function(t){return gt(this,"awaiting",t,r.groupSimultaneous(this,t).map(function(t){var n,r;n=t[0],r=t[1];return r.length===0}).toProperty(false).skipDuplicates())};r.Observable.prototype.not=function(){return gt(this,"not",this.map(function(t){return!t}))};r.Property.prototype.and=function(t){return gt(this,"and",t,this.combine(t,function(t,n){return t&&n}))};r.Property.prototype.or=function(t){return gt(this,"or",t,this.combine(t,function(t,n){return t||n}))};r.scheduler={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},asap:function(t){return this.setTimeout(t,0)},now:function(){return(new Date).getTime()}};r.EventStream.prototype.bufferWithTime=function(t){return gt(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))};r.EventStream.prototype.bufferWithCount=function(t){return gt(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))};r.EventStream.prototype.bufferWithTimeOrCount=function(t,n){var r;r=function(r){if(r.values.length===n){return r.flush()}else if(t!==void 0){return r.schedule()}};return gt(this,"bufferWithTimeOrCount",t,n,this.buffer(t,r,r))};r.EventStream.prototype.buffer=function(t,n,e){var i,u,o;if(n==null){n=et}if(e==null){e=et}i={scheduled:null,end:void 0,values:[],flush:function(){var t;if(this.scheduled){r.scheduler.clearTimeout(this.scheduled);this.scheduled=null}if(this.values.length>0){t=this.push(rt(this.values));this.values=[];if(this.end!=null){return this.push(this.end)}else if(t!==r.noMore){return e(this)}}else{if(this.end!=null){return this.push(this.end)}}},schedule:function(){if(!this.scheduled){return this.scheduled=t(function(t){return function(){return t.flush()}}(this))}}};o=r.more;if(!k.isFunction(t)){u=t;t=function(t){return r.scheduler.setTimeout(t,u)}}return gt(this,"buffer",this.withHandler(function(t){i.push=function(t){return function(n){return t.push(n)}}(this);if(t.isError()){o=this.push(t)}else if(t.isEnd()){i.end=t;if(!i.scheduled){i.flush()}}else{i.values.push(t.value());n(i)}return o}))};r.Observable.prototype.filter=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return D(this,n,t,function(t){return gt(this,"filter",t,this.withHandler(function(n){if(n.filter(t)){return this.push(n)}else{return r.more}}))})};r.once=function(t){return new h(V(r,"once",t),function(n){r.scheduler.asap(function(){n(ct(t));return n(L())});return et})};r.immediately=function(t){return new h(V(r,"immediately",t),function(n){n(ct(t));n(L());return et})};r.EventStream.prototype.concat=function(t){var n;n=this;return new h(V(n,"concat",t),function(r){var e,i;i=et;e=n.dispatcher.subscribe(function(n){if(n.isEnd()){return i=t.dispatcher.subscribe(r)}else{return r(n)}});return function(){e();return i()}})};r.Observable.prototype.flatMap=function(){return B(this,nt(arguments))};r.Observable.prototype.flatMapFirst=function(){return B(this,nt(arguments),true)};B=function(t,n,e,i){var o,a,s;s=[t];o=[];a=new h(V(t,"flatMap"+(e?"First":""),n),function(a){var s,f,c,l,h;c=new u;l=[];h=function(t){var e;e=tt(n(t.value()));o.push(e);return c.add(function(t,n){return e.dispatcher.subscribe(function(i){var u;if(i.isEnd()){k.remove(e,o);f();s(n);return r.noMore}else{if(i instanceof v){i=i.toNext()}u=a(i);if(u===r.noMore){t()}return u}})})};f=function(){var t;t=l.shift();if(t){return h(t)}};s=function(t){t();if(c.empty()){return a(L())}};c.add(function(n,u){return t.dispatcher.subscribe(function(t){if(t.isEnd()){return s(u)}else if(t.isError()){return a(t)}else if(e&&c.count()>1){return r.more}else{if(c.unsubscribed){return r.noMore}if(i&&c.count()>i){return l.push(t)}else{return h(t)}}})});return c.unsubscribe});a.internalDeps=function(){if(o.length){return s.concat(o)}else{return s}};return a};nt=function(t){if(t.length===1&&G(t[0])){return k.always(t[0])}else{return Y(t)}};tt=function(t){if(G(t)){return t}else{return r.immediately(t)}};r.Observable.prototype.flatMapWithConcurrencyLimit=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return gt.apply(null,[this,"flatMapWithConcurrencyLimit",n].concat(wt.call(t),[B(this,nt(t),false,n)]))};r.Observable.prototype.flatMapConcat=function(){return gt.apply(null,[this,"flatMapConcat"].concat(wt.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(wt.call(arguments)))]))};O=function(t,n){var e;e=new h(V(t,"justInitValue"),function(n){var i,u;u=void 0;i=t.dispatcher.subscribe(function(t){if(!t.isEnd()){u=t}return r.noMore});E.whenDoneWith(e,function(){if(u!=null){n(u)}return n(L())});return i});return e.concat(n).toProperty()};r.Observable.prototype.mapEnd=function(){var t;t=Y(arguments);return gt(this,"mapEnd",t,this.withHandler(function(n){if(n.isEnd()){this.push(rt(t(n)));this.push(L());return r.noMore}else{return this.push(n)}}))};r.Observable.prototype.skipErrors=function(){return gt(this,"skipErrors",this.withHandler(function(t){if(t.isError()){return r.more}else{return this.push(t)}}))};r.EventStream.prototype.takeUntil=function(t){var n;n={};return gt(this,"takeUntil",t,r.groupSimultaneous(this.mapEnd(n),t.skipErrors()).withHandler(function(e){var i,u,o,a,s,f;if(!e.hasValue()){return this.push(e)}else{a=e.value(),i=a[0],t=a[1];if(t.length){return this.push(L())}else{s=r.more;for(u=0,o=i.length;u<o;u++){f=i[u];if(f===n){s=this.push(L())}else{s=this.push(rt(f))}}return s}}}))};r.Property.prototype.takeUntil=function(t){var n;n=this.changes().takeUntil(t);return gt(this,"takeUntil",t,O(this,n))};r.Observable.prototype.flatMapLatest=function(){var t,n;t=nt(arguments);n=this.toEventStream();return gt(this,"flatMapLatest",t,n.flatMap(function(r){return tt(t(r)).takeUntil(n)}))};r.fromPoll=function(t,n){return gt(r,"fromPoll",t,n,r.fromBinder(function(n){var e;e=r.scheduler.setInterval(n,t);return function(){return r.scheduler.clearInterval(e)}},n))};r.later=function(t,n){return gt(r,"later",t,n,r.fromBinder(function(e){var i,u;u=function(){return e([n,L()])};i=r.scheduler.setTimeout(u,t);return function(){return r.scheduler.clearTimeout(i)}}))};r.sequentially=function(t,n){var e;e=0;return gt(r,"sequentially",t,n,r.fromPoll(t,function(){var t;t=n[e++];if(e<n.length){return t}else if(e===n.length){return[t,L()]}else{return L()}}))};r.repeatedly=function(t,n){var e;

e=0;return gt(r,"repeatedly",t,n,r.fromPoll(t,function(){return n[e++%n.length]}))};r.interval=function(t,n){if(n==null){n={}}return gt(r,"interval",t,n,r.fromPoll(t,function(){return rt(n)}))};r.EventStream.prototype.delay=function(t){return gt(this,"delay",t,this.flatMap(function(n){return r.later(t,n)}))};r.Property.prototype.delay=function(t){return this.delayChanges("delay",t,function(n){return n.delay(t)})};r.Property.prototype.delayChanges=function(){var t,n,r;t=2<=arguments.length?wt.call(arguments,0,r=arguments.length-1):(r=0,[]),n=arguments[r++];return gt.apply(null,[this].concat(wt.call(t),[O(this,n(this.changes()))]))};r.Observable.prototype.bufferingThrottle=function(t){return gt(this,"bufferingThrottle",t,this.flatMapConcat(function(n){return r.immediately(n).concat(r.later(t).filter(false))}))};r.Property.prototype.bufferingThrottle=function(){return r.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()};i=function(t){bt(n,t);function n(){this.guardedSink=xt(this.guardedSink,this);this.subscribeAll=xt(this.subscribeAll,this);this.unsubAll=xt(this.unsubAll,this);this.sink=void 0;this.subscriptions=[];this.ended=false;n.__super__.constructor.call(this,V(r,"Bus"),this.subscribeAll)}n.prototype.unsubAll=function(){var t,n,r,e;r=this.subscriptions;for(t=0,n=r.length;t<n;t++){e=r[t];if(typeof e.unsub==="function"){e.unsub()}}return void 0};n.prototype.subscribeAll=function(t){var n,r,e,i;this.sink=t;e=T(this.subscriptions);for(n=0,r=e.length;n<r;n++){i=e[n];this.subscribeInput(i)}return this.unsubAll};n.prototype.guardedSink=function(t){return function(n){return function(e){if(e.isEnd()){n.unsubscribeInput(t);return r.noMore}else{return n.sink(e)}}}(this)};n.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))};n.prototype.unsubscribeInput=function(t){var n,r,e,i,u;i=this.subscriptions;for(n=r=0,e=i.length;r<e;n=++r){u=i[n];if(u.input===t){if(typeof u.unsub==="function"){u.unsub()}this.subscriptions.splice(n,1);return}}};n.prototype.plug=function(t){var n;A(t);if(this.ended){return}n={input:t};this.subscriptions.push(n);if(this.sink!=null){this.subscribeInput(n)}return function(n){return function(){return n.unsubscribeInput(t)}}(this)};n.prototype.end=function(){this.ended=true;this.unsubAll();return typeof this.sink==="function"?this.sink(L()):void 0};n.prototype.push=function(t){return typeof this.sink==="function"?this.sink(rt(t)):void 0};n.prototype.error=function(t){return typeof this.sink==="function"?this.sink(new c(t)):void 0};return n}(h);r.Bus=i;Z=function(t,n){return yt(function(){var e,i,u;i=arguments[0],e=2<=arguments.length?wt.call(arguments,1):[];u=it(n,[function(t,n){return i.apply(null,wt.call(t).concat([n]))}]);return gt.apply(null,[r,t,i].concat(wt.call(e),[r.combineAsArray(e).flatMap(u)]))})};r.fromCallback=Z("fromCallback",function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return r.fromBinder(function(r){Q(n,t)(r);return et},function(t){return[t,L()]})});r.fromNodeCallback=Z("fromNodeCallback",function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return r.fromBinder(function(r){Q(n,t)(r);return et},function(t,n){if(t){return[new c(t),L()]}return[n,L()]})});r.EventStream.prototype.debounce=function(t){return gt(this,"debounce",t,this.flatMapLatest(function(n){return r.later(t,n)}))};r.Property.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(n){return n.debounce(t)})};r.EventStream.prototype.debounceImmediate=function(t){return gt(this,"debounceImmediate",t,this.flatMapFirst(function(n){return r.immediately(n).concat(r.later(t).filter(false))}))};r.Observable.prototype.scan=function(t,n){var e,i,u;n=ft(n);e=pt(t);u=function(t){return function(u){var o,a,s,f;o=false;f=et;a=r.more;s=function(){if(!o){return e.forEach(function(t){o=true;a=u(new v(function(){return t}));if(a===r.noMore){f();return f=et}})}};f=t.dispatcher.subscribe(function(t){var i,f;if(t.hasValue()){if(o&&t.isInitial()){return r.more}else{if(!t.isInitial()){s()}o=true;f=e.getOrElse(void 0);i=n(f,t.value());e=new w(i);return u(t.apply(function(){return i}))}}else{if(t.isEnd()){a=s()}if(a!==r.noMore){return u(t)}}});E.whenDoneWith(i,s);return f}}(this);return i=new m(V(this,"scan",t,n),u)};r.Observable.prototype.diff=function(t,n){n=ft(n);return gt(this,"diff",t,n,this.scan([t],function(t,r){return[r,n(t[0],r)]}).filter(function(t){return t.length===2}).map(function(t){return t[1]}))};r.Observable.prototype.doAction=function(){var t;t=Y(arguments);return gt(this,"doAction",t,this.withHandler(function(n){if(n.hasValue()){t(n.value())}return this.push(n)}))};r.Observable.prototype.endOnError=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];if(n==null){n=true}return D(this,n,t,function(t){return gt(this,"endOnError",this.withHandler(function(n){if(n.isError()&&t(n.error)){this.push(n);return this.push(L())}else{return this.push(n)}}))})};y.prototype.errors=function(){return gt(this,"errors",this.filter(function(){return false}))};dt=function(t){return[t,L()]};r.fromPromise=function(t,n){return gt(r,"fromPromise",t,r.fromBinder(function(r){var e;if((e=t.then(r,function(t){return r(new c(t))}))!=null){if(typeof e.done==="function"){e.done()}}return function(){if(n){return typeof t.abort==="function"?t.abort():void 0}}},dt))};r.Observable.prototype.mapError=function(){var t;t=Y(arguments);return gt(this,"mapError",t,this.withHandler(function(n){if(n.isError()){return this.push(rt(t(n.error)))}else{return this.push(n)}}))};r.Observable.prototype.flatMapError=function(t){return gt(this,"flatMapError",t,this.mapError(function(t){return new c(t)}).flatMap(function(n){if(n instanceof c){return t(n.error)}else{return r.immediately(n)}}))};r.EventStream.prototype.sampledBy=function(t,n){return gt(this,"sampledBy",t,n,this.toProperty().sampledBy(t,n))};r.Property.prototype.sampledBy=function(t,n){var e,i,u,o,a;if(n!=null){n=ft(n)}else{e=true;n=function(t){return t.value()}}a=new x(this,false,e);u=new x(t,true,e);o=r.when([a,u],n);i=t instanceof m?o.toProperty():o;return gt(this,"sampledBy",t,n,i)};r.Property.prototype.sample=function(t){return gt(this,"sample",t,this.sampledBy(r.interval(t,{})))};r.Observable.prototype.map=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];if(n instanceof m){return n.sampledBy(this,z)}else{return D(this,n,t,function(t){return gt(this,"map",t,this.withHandler(function(n){return this.push(n.fmap(t))}))})}};r.Observable.prototype.fold=function(t,n){return gt(this,"fold",t,n,this.scan(t,n).sampledBy(this.filter(false).mapEnd().toProperty()))};y.prototype.reduce=y.prototype.fold;r.EventStream.prototype.merge=function(t){var n;M(t);n=this;return gt(n,"merge",t,r.mergeAll(this,t))};r.mergeAll=function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];if($(t[0])){t=t[0]}if(t.length){return new h(V.apply(null,[r,"mergeAll"].concat(wt.call(t))),function(n){var e,i,u;e=0;u=function(i){return function(u){return i.dispatcher.subscribe(function(i){var o;if(i.isEnd()){e++;if(e===t.length){return n(L())}else{return r.more}}else{o=n(i);if(o===r.noMore){u()}return o}})}};i=k.map(u,t);return new r.CompositeUnsubscribe(i).unsubscribe})}else{return r.never()}};r.Observable.prototype.take=function(t){if(t<=0){return r.never()}return gt(this,"take",t,this.withHandler(function(n){if(!n.hasValue()){return this.push(n)}else{t--;if(t>0){return this.push(n)}else{if(t===0){this.push(n)}this.push(L());return r.noMore}}}))};r.fromArray=function(t){return gt(r,"fromArray",t,r.sequentially(0,t))};r.fromArraySync=function(t){var n;_(t);if(!t.length){return gt(r,"fromArraySync",t,r.never())}else{n=0;return new h(V(r,"fromArraySync",t),function(e){var i,u,o;o=false;u=r.more;i=function(){var a;if(u!==r.noMore&&!o){a=t[n++];u=e(ct(a));if(u!==r.noMore){if(n===t.length){return e(L())}else{return E.afterTransaction(i)}}}};i();return function(){return o=true}})}};r.EventStream.prototype.holdWhen=function(t){var n,e,i;i=t.startWith(false);e=i.filter(function(t){return!t});n=i.filter(k.id);return gt(this,"holdWhen",t,this.filter(false).merge(i.flatMapConcat(function(t){return function(i){if(!i){return t.takeUntil(n)}else{return t.scan([],function(t,n){return t.concat([n])}).sampledBy(e).take(1).flatMap(r.fromArraySync)}}}(this))))};r.$={};r.$.asEventStream=function(t,n,e){var i;if(k.isFunction(n)){i=[n,void 0],e=i[0],n=i[1]}return gt(this.selector||this,"asEventStream",t,r.fromBinder(function(r){return function(e){r.on(t,n,e);return function(){return r.off(t,n,e)}}}(this),e))};if((ot=typeof jQuery!=="undefined"&&jQuery!==null?jQuery:typeof Zepto!=="undefined"&&Zepto!==null?Zepto:void 0)!=null){ot.fn.asEventStream=r.$.asEventStream}r.Observable.prototype.log=function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];this.subscribe(function(n){return typeof console!=="undefined"&&console!==null?typeof console.log==="function"?console.log.apply(console,wt.call(t).concat([n.log()])):void 0:void 0});return this};r.repeat=function(t){var n;n=0;return r.fromBinder(function(e){var i,u,o,a,s;i=false;o=r.more;s=function(){};u=function(t){if(t.isEnd()){if(!i){return i=true}else{return a()}}else{return o=e(t)}};a=function(){var a;i=true;while(i&&o!==r.noMore){a=t(n++);i=false;if(a){s=a.subscribeInternal(u)}else{e(L())}}return i=true};a();return function(){return s()}})};r.retry=function(t){var n,e,i,u,o,a,s;if(!k.isFunction(t.source)){throw new p("'source' option has to be a function")}s=t.source;a=t.retries||0;o=t.maxRetries||a;n=t.delay||function(){return 0};u=t.isRetryable||function(){return true};i=false;e=null;return gt(r,"retry",t,r.repeat(function(){var t,f,c;if(i){return null}else{c=function(){return s().endOnError().withHandler(function(t){if(t.isError()){e=t;if(u(e.error)&&a>0){}else{i=true;return this.push(t)}}else{if(t.hasValue()){e=null;i=true}return this.push(t)}})};if(e){t={error:e.error,retriesDone:o-a};f=r.later(n(t)).filter(false);a=a-1;return f.concat(r.immediately().flatMap(c))}else{return c()}}}))};r.Observable.prototype.skip=function(t){return gt(this,"skip",t,this.withHandler(function(n){if(!n.hasValue()){return this.push(n)}else if(t>0){t--;return r.more}else{return this.push(n)}}))};r.EventStream.prototype.skipUntil=function(t){var n;n=t.take(1).map(true).toProperty(false);return gt(this,"skipUntil",t,this.filter(n))};r.EventStream.prototype.skipWhile=function(){var t,n,e;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];e=false;return D(this,n,t,function(t){return gt(this,"skipWhile",t,this.withHandler(function(n){if(e||!n.hasValue()||!t(n.value())){if(n.hasValue()){e=true}return this.push(n)}else{return r.more}}))})};r.Observable.prototype.slidingWindow=function(t,n){if(n==null){n=0}return gt(this,"slidingWindow",t,n,this.scan([],function(n,r){return n.concat([r]).slice(-t)}).filter(function(t){return t.length>=n}))};r.spy=function(t){return st.push(t)};st=[];at=function(t){var n,r,e;if(st.length){if(!at.running){try{at.running=true;for(n=0,r=st.length;n<r;n++){e=st[n];e(t)}}finally{delete at.running}}}return void 0};r.Property.prototype.startWith=function(t){return gt(this,"startWith",t,this.scan(t,function(t,n){return n}))};r.EventStream.prototype.startWith=function(t){return gt(this,"startWith",t,r.immediately(t).concat(this))};r.Observable.prototype.takeWhile=function(){var t,n;n=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[];return D(this,n,t,function(t){return gt(this,"takeWhile",t,this.withHandler(function(n){if(n.filter(t)){return this.push(n)}else{this.push(L());return r.noMore}}))})};r.update=function(){var t,n,e,i;n=arguments[0],i=2<=arguments.length?wt.call(arguments,1):[];e=function(t){return function(){var n;n=1<=arguments.length?wt.call(arguments,0):[];return function(r){return t.apply(null,[r].concat(n))}}};t=i.length-1;while(t>0){if(!(i[t]instanceof Function)){i[t]=function(t){return function(){return t}}(i[t])}i[t]=e(i[t]);t=t-2}return gt.apply(null,[r,"update",n].concat(wt.call(i),[r.when.apply(r,i).scan(n,function(t,n){return n(t)})]))};r.zipAsArray=function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];if($(t[0])){t=t[0]}return gt.apply(null,[r,"zipAsArray"].concat(wt.call(t),[r.zipWith(t,function(){var t;t=1<=arguments.length?wt.call(arguments,0):[];return t})]))};r.zipWith=function(){var t,n,e;t=arguments[0],e=2<=arguments.length?wt.call(arguments,1):[];if(!k.isFunction(t)){n=[t,e[0]],e=n[0],t=n[1]}e=k.map(function(t){return t.toEventStream()},e);return gt.apply(null,[r,"zipWith",t].concat(wt.call(e),[r.when(e,t)]))};r.Observable.prototype.zip=function(t,n){if(n==null){n=Array}return gt(this,"zip",t,r.zipWith([this,t],n))};r.Observable.prototype.first=function(){return gt(this,"first",this.take(1))};r.Observable.prototype.last=function(){var t;return gt(this,"last",this.withHandler(function(n){if(n.isEnd()){if(t){this.push(t)}this.push(L());return r.noMore}else{t=n}}))};r.EventStream.prototype.throttle=function(t){return gt(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))};r.Property.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(n){return n.throttle(t)})};y.prototype.firstToPromise=function(t){var n=this;if(typeof t!=="function"){if(typeof Promise==="function"){t=Promise}else{throw new p("There isn't default Promise, use shim or parameter")}}return new t(function(t,e){return n.subscribe(function(n){if(n.hasValue()){t(n.value())}if(n.isError()){e(n.error)}return r.noMore})})};y.prototype.toPromise=function(t){return this.last().firstToPromise(t)};if(typeof define!=="undefined"&&define!==null&&define.amd!=null){define([],function(){return r});this.Bacon=r}else if(typeof n!=="undefined"&&n!==null&&n.exports!=null){n.exports=r;r.Bacon=r}else{this.Bacon=r}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(t,n,r){(function(e){(function(t){if(typeof r==="object"&&typeof n!=="undefined"){n.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var i;if(typeof window!=="undefined"){i=window}else if(typeof e!=="undefined"){i=e}else if(typeof self!=="undefined"){i=self}else{i=this}i.Baz=t()}})(function(){var n,r,e;return function i(n,r,e){function u(a,s){if(!r[a]){if(!n[a]){var f=typeof t=="function"&&t;if(!s&&f)return f(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};n[a][0].call(l.exports,function(t){var r=n[a][1][t];return u(r?r:t)},l,l.exports,i,n,r,e)}return r[a].exports}var o=typeof t=="function"&&t;for(var a=0;a<e.length;a++)u(e[a]);return u}({1:[function(t,n,r){var e="Function.prototype.bind called on incompatible ";var i=Array.prototype.slice;var u=Object.prototype.toString;var o="[object Function]";n.exports=function a(t){var n=this;if(typeof n!=="function"||u.call(n)!==o){throw new TypeError(e+n)}var r=i.call(arguments,1);var a=function(){if(this instanceof l){var e=n.apply(this,r.concat(i.call(arguments)));if(Object(e)===e){return e}return this}else{return n.apply(t,r.concat(i.call(arguments)))}};var s=Math.max(0,n.length-r.length);var f=[];for(var c=0;c<s;c++){f.push("$"+c)}var l=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(a);if(n.prototype){var h=function p(){};h.prototype=n.prototype;l.prototype=new h;h.prototype=null}return l}},{}],2:[function(t,n,r){var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var i=window.WeakMap;if(typeof i==="undefined"){var u=Object.defineProperty;var o=Date.now()%1e9;i=function(){this.name="__st"+(Math.random()*1e9>>>0)+(o++ +"__")};i.prototype={set:function(t,n){var r=t[this.name];if(r&&r[0]===t)r[1]=n;else u(t,this.name,{value:[t,n],writable:true});return this},get:function(t){var n;return(n=t[this.name])&&n[0]===t?n[1]:undefined},"delete":function(t){var n=t[this.name];if(!n)return false;var r=n[0]===t;n[0]=n[1]=undefined;return r},has:function(t){var n=t[this.name];if(!n)return false;return n[0]===t}}}var a=new i;var s=window.msSetImmediate;if(!s){var f=[];var c=String(Math.random());window.addEventListener("message",function(t){if(t.data===c){var n=f;f=[];n.forEach(function(t){t()})}});s=function(t){f.push(t);window.postMessage(c,"*")}}var l=false;var h=[];function p(t){h.push(t);if(!l){l=true;s(d)}}function v(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}function d(){l=false;var t=h;h=[];t.sort(function(t,n){return t.uid_-n.uid_});var n=false;t.forEach(function(t){var r=t.takeRecords();g(t);if(r.length){t.callback_(r,t);n=true}});if(n)d()}function g(t){t.nodes_.forEach(function(n){var r=a.get(n);if(!r)return;r.forEach(function(n){if(n.observer===t)n.removeTransientObservers()})})}function y(t,n){for(var r=t;r;r=r.parentNode){var e=a.get(r);if(e){for(var i=0;i<e.length;i++){var u=e[i];var o=u.options;if(r!==t&&!o.subtree)continue;var s=n(o);if(s)u.enqueue(s)}}}}var m=0;function b(t){this.callback_=t;this.nodes_=[];this.records_=[];this.uid_=++m}b.prototype={observe:function(t,n){t=v(t);if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData){throw new SyntaxError}var r=a.get(t);if(!r)a.set(t,r=[]);var e;for(var i=0;i<r.length;i++){if(r[i].observer===this){e=r[i];e.removeListeners();e.options=n;break}}if(!e){e=new N(this,t,n);r.push(e);this.nodes_.push(t)}e.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){var n=a.get(t);for(var r=0;r<n.length;r++){var e=n[r];if(e.observer===this){e.removeListeners();n.splice(r,1);break}}},this);this.records_=[]},takeRecords:function(){var t=this.records_;this.records_=[];return t}};function w(t,n){this.type=t;this.target=n;this.addedNodes=[];this.removedNodes=[];this.previousSibling=null;this.nextSibling=null;this.attributeName=null;this.attributeNamespace=null;this.oldValue=null}function x(t){var n=new w(t.type,t.target);n.addedNodes=t.addedNodes.slice();n.removedNodes=t.removedNodes.slice();n.previousSibling=t.previousSibling;n.nextSibling=t.nextSibling;n.attributeName=t.attributeName;n.attributeNamespace=t.attributeNamespace;n.oldValue=t.oldValue;return n}var E,k;function O(t,n){return E=new w(t,n)}function S(t){if(k)return k;k=x(E);k.oldValue=t;return k}function _(){E=k=undefined}function M(t){return t===k||t===E}function j(t,n){if(t===n)return t;if(k&&M(t))return k;return null}function N(t,n,r){this.observer=t;this.target=n;this.options=r;this.transientObservedNodes=[]}N.prototype={enqueue:function(t){var n=this.observer.records_;var r=n.length;if(n.length>0){var e=n[r-1];var i=j(e,t);if(i){n[r-1]=i;return}}else{p(this.observer)}n[r]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var n=this.options;if(n.attributes)t.addEventListener("DOMAttrModified",this,true);if(n.characterData)t.addEventListener("DOMCharacterDataModified",this,true);if(n.childList)t.addEventListener("DOMNodeInserted",this,true);if(n.childList||n.subtree)t.addEventListener("DOMNodeRemoved",this,true)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var n=this.options;if(n.attributes)t.removeEventListener("DOMAttrModified",this,true);if(n.characterData)t.removeEventListener("DOMCharacterDataModified",this,true);if(n.childList)t.removeEventListener("DOMNodeInserted",this,true);if(n.childList||n.subtree)t.removeEventListener("DOMNodeRemoved",this,true)},addTransientObserver:function(t){if(t===this.target)return;this.addListeners_(t);this.transientObservedNodes.push(t);var n=a.get(t);if(!n)a.set(t,n=[]);n.push(this)},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[];t.forEach(function(t){this.removeListeners_(t);var n=a.get(t);for(var r=0;r<n.length;r++){if(n[r]===this){n.splice(r,1);break}}},this)},handleEvent:function(t){t.stopImmediatePropagation();switch(t.type){case"DOMAttrModified":var n=t.attrName;var r=t.relatedNode.namespaceURI;var e=t.target;var i=new O("attributes",e);i.attributeName=n;i.attributeNamespace=r;var u=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;y(e,function(t){if(!t.attributes)return;if(t.attributeFilter&&t.attributeFilter.length&&t.attributeFilter.indexOf(n)===-1&&t.attributeFilter.indexOf(r)===-1){return}if(t.attributeOldValue)return S(u);return i});break;case"DOMCharacterDataModified":var e=t.target;var i=O("characterData",e);var u=t.prevValue;y(e,function(t){if(!t.characterData)return;if(t.characterDataOldValue)return S(u);return i});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var e=t.relatedNode;var o=t.target;var a,s;if(t.type==="DOMNodeInserted"){a=[o];s=[]}else{a=[];s=[o]}var f=o.previousSibling;var c=o.nextSibling;var i=O("childList",e);i.addedNodes=a;i.removedNodes=s;i.previousSibling=f;i.nextSibling=c;y(e,function(t){if(!t.childList)return;return i})}_()}};if(!e){e=b}n.exports=e},{}],3:[function(t,n,r){"use strict";var e=["data-bazid","data-bazooka"];var i=/^(?:\{.*\}|\[.*\])$/;var u=/^data-([a-z\d\-]+)$/;var o=/-([a-z])/gi;var a=function(t,n){return n.toUpperCase()};function s(t,n,r){if(typeof r.value!=="string"){return n}if(!u.test(r.name)||e.indexOf(r.name)!==-1){return n}var s=r.name.match(u)[1];if(t){t=t.concat("-");if(t===s.slice(0,t.length)){s=s.slice(t.length)}else{return n}}var f=s.replace(o,a);var c;switch(r.value){case"true":c=true;break;case"false":c=false;break;case"null":c=null;break;default:try{if(r.value===+r.value+""){c=+r.value}else if(i.test(r.value)){c=JSON.parse(r.value)}else{c=r.value}}catch(l){return n}}n[f]=c;return n}function f(t,n){return Array.prototype.reduce.call(n.attributes,s.bind(null,t),{})}var c=function(t,n){if(typeof t==="string"&&n===void 0){return f.bind(null,t)}if(n===void 0){n=t;return f("",n)}return f(t,n)};n.exports={getAttrs:c}},{}],4:[function(t,n,r){"use strict";var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!e){e=t("mutation-observer")}if(!Function.prototype.bind){Function.prototype.bind=t("function-bind")}var i=0;var u={};var o={};var a={};function s(n){if(o[n]===void 0){o[n]=t(n)}return o[n]}function f(t,n){var r=t.id;if(u[r]===void 0){u[r]=[]}if(u[r].indexOf(n)===-1){u[r].push(n);var e=s(n);var i;if(e.bazFunc){i=e.bazFunc}else{i=e}i(t.__wrapped__)}}function c(t){var n=t.getAttribute("data-bazid");if(n==null){n=(i++).toString();t.setAttribute("data-bazid",n);a[n]=this}this.__wrapped__=t;this.id=n}c.prototype.constructor=c;function l(t){var n=t.getAttribute("data-bazooka");var r=new c(t);f(r,n)}var h=function(t){if(t instanceof c){return t}return new c(t)};h.BazookaWrapper=c;h.h=t("./helpers.js");h.register=function(t){for(name in t){o[name]=t[name]}};h.refresh=function(t){t=t||document.body;for(var n in a){if(a[n]&&!a[n].__wrapped__.parentNode){a[n]=null;u[n]=[]}}Array.prototype.forEach.call(t.querySelectorAll("[data-bazooka]:not([data-bazid])"),l)};function p(t){h.refresh(t.target)}function v(t){t.forEach(p)}h.watch=function(t){t=t||document.body;h.refresh(t);var n=new e(v);n.observe(t,{childList:true,subtree:true});return n.disconnect.bind(n)};n.exports=h},{"./helpers.js":3,"function-bind":1,"mutation-observer":2}]},{},[4])(4)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],3:[function(t,n,r){},{}],4:[function(t,n,r){(function(){"use strict";var t={ramda:"placeholder"};var e=function pi(t,n){return t+n};var i=function vi(t,n){var r=-1;while(++r<n.length){if(!t(n[r])){return false}}return true};var u=function di(t,n){var r=-1;while(++r<n.length){if(t(n[r])){return true}}return false};var o=function gi(t,n,r){var e={};for(var i in r){e[i]=r[i]}e[t]=n;return e};var a=function yi(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))};var s=function mi(t){return function(){return!t.apply(this,arguments)}};var f=function bi(t,n){return function(){return t.call(this,n.apply(this,arguments))}};var c=function wi(t,n){t=t||[];n=n||[];var r;var e=t.length;var i=n.length;var u=[];r=-1;while(++r<e){u[u.length]=t[r]}r=-1;while(++r<i){u[u.length]=n[r]}return u};var l=function xi(t,n,r){var e=-1,i=r.length;while(++e<i){if(t(n,r[e])){return true}}return false};var h=function Ei(t,n){var r={};r[t]=n;return r};var p=function ki(t){return function(n,r){if(!(r&&r.length>0)){return}var e=0;var i=r[e];var u=n(i);var o;while(++e<r.length){o=n(r[e]);if(t(o,u)){u=o;i=r[e]}}return i}};var v=function Oi(n){return function r(e){if(arguments.length===0){return r}else if(e===t){return r}else{return n(e)}}};var d=function Si(n){return function r(e,i){var u=arguments.length;if(u===0){return r}else if(u===1&&e===t){return r}else if(u===1){return v(function(t){return n(e,t)})}else if(u===2&&e===t&&i===t){return r}else if(u===2&&e===t){return v(function(t){return n(t,i)})}else if(u===2&&i===t){return v(function(t){return n(e,t)})}else{return n(e,i)}}};var g=function _i(n){return function r(e,i,u){var o=arguments.length;if(o===0){return r}else if(o===1&&e===t){return r}else if(o===1){return d(function(t,r){return n(e,t,r)})}else if(o===2&&e===t&&i===t){return r}else if(o===2&&e===t){return d(function(t,r){return n(t,i,r)})}else if(o===2&&i===t){return d(function(t,r){return n(e,t,r)})}else if(o===2){return v(function(t){return n(e,i,t)})}else if(o===3&&e===t&&i===t&&u===t){return r}else if(o===3&&e===t&&i===t){return d(function(t,r){return n(t,r,u)})}else if(o===3&&e===t&&u===t){return d(function(t,r){return n(t,i,r)})}else if(o===3&&i===t&&u===t){return d(function(t,r){return n(e,t,r)})}else if(o===3&&e===t){return v(function(t){return n(t,i,u)})}else if(o===3&&i===t){return v(function(t){return n(e,t,u)})}else if(o===3&&u===t){return v(function(t){return n(e,i,t)})}else{return n(e,i,u)}}};var y=function Mi(t,n){var r={};for(var e in n){if(e!==t){r[e]=n[e]}}return r};var m=function ji(t,n){var r=-1,e=n.length,i=[];while(++r<e){if(t(n[r])){i[i.length]=n[r]}}return i};var b=function Ni(t,n){var r=-1,e=n.length,i=[];while(++r<e){if(t(n[r],r,n)){i[i.length]=n[r]}}return i};var w=function Ai(t,n){var r=-1,e=n.length;while(++r<e){t(n[r])}return n};var x=function Ii(t){return function(n){return m(function(t){return typeof n[t]==="function"},t(n))}};var E=function Ti(t,n){return t>n};var k=function Pi(t,n){return Object.prototype.hasOwnProperty.call(n,t)};var O=function Ci(t){return t};var S=function Di(t,n,r){var e=0,i=t.length;if(typeof r=="number"){e=r<0?Math.max(0,i+r):r}while(e<i){if(t[e]===n){return e}++e}return-1};var _=Array.isArray||function Vi(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};var M=Number.isInteger||function Li(t){return t<<0===t};var j=function Wi(t){return t!=null&&t===Object(t)&&typeof t.then==="function"};var N=function Fi(t){return typeof t.step==="function"&&typeof t.result==="function"};var A=function Ri(t,n,r){var e=t.length;if(typeof r=="number"){e=r<0?e+r+1:Math.min(e,r+1)}while(--e>=0){if(t[e]===n){return e}}return-1};var I=function qi(t,n){return t<n};var T=function Bi(t,n){var r=-1,e=n.length,i=[];while(++r<e){i[r]=t(n[r])}return i};var P=function zi(t,n){return t*n};var C=function Ui(t,n){return t<0?n[n.length+t]:n[t]};var D=function Hi(t,n){if(n==null||t.length===0){return}else{var r=n;for(var e=0,i=t.length;e<i&&r!=null;e+=1){r=r[t[e]]}return r}};var V=function $i(t,n){return c([t],n)};var L=function(t){return t&&t.__transducers_reduced__?t:{value:t,__transducers_reduced__:true}};var W=function Xi(t,n,r){if(t===r){return true}if(r==null){return false}n.fn=n.fn||[];n.obj=n.obj||[];var e,i,u=-1,o=n.fn.length,a=-1,s=n.obj.length;while(++u<o){e=n.fn[u];i=t[e];if(!(e in r)){return false}if(!i(r[e],r)){return false}}while(++a<s){e=n.obj[a];if(t[e]!==r[e]){return false}}return true};var F=function Gi(t,n,r){switch(arguments.length){case 1:return Gi(t,0,t.length);case 2:return Gi(t,n,t.length);default:var e=Math.max(0,r-n),i=[],u=-1;while(++u<e){i[u]=t[n+u]}return i}};var R=function(){function t(t,n){this.xf=n;this.f=t;this.all=true}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){if(this.all){t=this.xf.step(t,true)}return this.xf.result(t)};t.prototype.step=function(t,n){if(!this.f(n)){this.all=false;t=L(this.xf.step(t,false))}return t};return d(function n(r,e){return new t(r,e)})}();var q=function(){function t(t,n){this.xf=n;this.f=t;this.any=false}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){if(!this.any){t=this.xf.step(t,false)}return this.xf.result(t)};t.prototype.step=function(t,n){if(this.f(n)){this.any=true;t=L(this.xf.step(t,true))}return t};return d(function n(r,e){return new t(r,e)})}();var B=function(){function t(t,n){this.xf=n;this.n=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){if(this.n>0){this.n-=1;return t}return this.xf.step(t,n)};return d(function n(r,e){return new t(r,e)})}();var z=function(){function t(t,n){this.xf=n;this.f=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){if(this.f){if(this.f(n)){return t}this.f=null}return this.xf.step(t,n)};return d(function n(r,e){return new t(r,e)})}();var U=function(){function t(t,n){this.xf=n;this.f=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){return this.f(n)?this.xf.step(t,n):t};return d(function n(r,e){return new t(r,e)})}();var H=function(){function t(t,n){this.xf=n;this.f=t;this.found=false}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){if(!this.found){t=this.xf.step(t,void 0)}return this.xf.result(t)};t.prototype.step=function(t,n){if(this.f(n)){this.found=true;t=L(this.xf.step(t,n))}return t};return d(function n(r,e){return new t(r,e)})}();var $=function(){function t(t,n){this.xf=n;this.f=t;this.idx=-1;this.found=false}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){if(!this.found){t=this.xf.step(t,-1)}return this.xf.result(t)};t.prototype.step=function(t,n){this.idx+=1;if(this.f(n)){this.found=true;t=L(this.xf.step(t,this.idx))}return t};return d(function n(r,e){return new t(r,e)})}();var X=function(){function t(t,n){this.xf=n;this.f=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.last))};t.prototype.step=function(t,n){if(this.f(n)){this.last=n}return t};return d(function n(r,e){return new t(r,e)})}();var G=function(){function t(t,n){this.xf=n;this.f=t;this.idx=-1;this.lastIdx=-1}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.lastIdx))};t.prototype.step=function(t,n){this.idx+=1;if(this.f(n)){this.lastIdx=this.idx}return t};return d(function n(r,e){return new t(r,e)})}();var K=function(){function t(t,n){this.xf=n;this.f=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){return this.xf.step(t,this.f(n))};return d(function n(r,e){return new t(r,e)})}();var Z=function(){function t(t,n){this.xf=n;this.n=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){this.n-=1;return this.n===0?L(this.xf.step(t,n)):this.xf.step(t,n)};return d(function n(r,e){return new t(r,e)})}();var Q=function(){function t(t,n){this.xf=n;this.f=t}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){return this.xf.result(t)};t.prototype.step=function(t,n){return this.f(n)?this.xf.step(t,n):L(t);

};return d(function n(r,e){return new t(r,e)})}();var Y=function(){function t(t){this.f=t}t.prototype.init=function(){throw new Error("init not implemented on XWrap")};t.prototype.result=function(t){return t};t.prototype.step=function(t,n){return this.f(t,n)};return function n(r){return new t(r)}}();var J=d(e);var tt=v(function Ki(t){return function(){return t}});var nt=d(function Zi(t,n){return t&&n});var rt=d(function Qi(t,n){var r=-1;var e=n.length-(t-1);var i=new Array(e>=0?e:0);while(++r<e){i[r]=F(n,r,r+t)}return i});var et=d(function Yi(t,n){return t.apply(this,n)});var it=d(function(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){void t;return n.apply(this,arguments)};case 2:return function(t,r){void r;return n.apply(this,arguments)};case 3:return function(t,r,e){void e;return n.apply(this,arguments)};case 4:return function(t,r,e,i){void i;return n.apply(this,arguments)};case 5:return function(t,r,e,i,u){void u;return n.apply(this,arguments)};case 6:return function(t,r,e,i,u,o){void o;return n.apply(this,arguments)};case 7:return function(t,r,e,i,u,o,a){void a;return n.apply(this,arguments)};case 8:return function(t,r,e,i,u,o,a,s){void s;return n.apply(this,arguments)};case 9:return function(t,r,e,i,u,o,a,s,f){void f;return n.apply(this,arguments)};case 10:return function(t,r,e,i,u,o,a,s,f,c){void c;return n.apply(this,arguments)};default:throw new Error("First argument to arity must be a non-negative integer no greater than ten")}});var ut=g(o);var ot=d(function Ji(t,n){return it(t.length,function(){return t.apply(n,arguments)})});var at=d(function tu(t,n){return function r(){return t.apply(this,arguments)&&n.apply(this,arguments)}});var st=v(function nu(t){return function(n,r){return t(n,r)?-1:t(r,n)?1:0}});var ft=v(s);var ct=function ru(){var t=arguments;return function(){var n=-1;while(++n<t.length){if(t[n][0].apply(this,arguments)){return t[n][1].apply(this,arguments)}}}};var lt=g(l);var ht=d(function eu(t,n){var r={};var e=n.length;var i=-1;while(++i<e){var u=t(n[i]);r[u]=(k(u,r)?r[u]:0)+1}return r});var pt=d(h);var vt=d(function iu(n,r){return it(n,function(){var e=arguments.length;var i=n-e;var u=e;while(--u>=0){if(arguments[u]===t){i+=1}}if(i<=0){return r.apply(this,arguments)}else{var o=F(arguments);return iu(i,function(){var n=F(arguments);var i=[];var u=-1;while(++u<e){var a=o[u];i[u]=a===t?n.shift():a}return r.apply(this,i.concat(n))})}})});var dt=J(-1);var gt=d(function uu(t,n){return n==null?t:n});var yt=g(function ou(t,n,r){var e=[];var i=-1;var u=n.length;var o=lt(t);while(++i<u){if(!o(n[i],r)&&!o(n[i],e)){e[i]=n[i]}}return e});var mt=d(y);var bt=d(function au(t,n){return t/n});var wt=d(function su(t,n){return function r(){return t.apply(this,arguments)||n.apply(this,arguments)}});var xt=d(function fu(t,n){if(t===0){return 1/t===1/n}else{return t===n||t!==t&&n!==n}});var Et=g(function cu(t,n,r){return n[t]===r[t]});var kt=d(b);var Ot=d(w);var St=d(function lu(t,n){var r=-1,e=n.length;while(++r<e){t(n[r],r,n)}return n});var _t=v(function hu(t){var n=-1,r=t.length,e={};while(++n<r){if(_(t[n])&&t[n].length){e[t[n][0]]=t[n][1]}}return e});var Mt=d(E);var jt=d(function pu(t,n){return t>=n});var Nt=d(k);var At=d(function(t,n){return t in n});var It=v(O);var Tt=g(function vu(t,n,r){return vt(Math.max(t.length,n.length,r.length),function e(){return t.apply(this,arguments)?n.apply(this,arguments):r.apply(this,arguments)})});var Pt=J(1);var Ct=d(function du(t,n){return S(n,t)});var Dt=g(function gu(t,n,r){t=t<r.length&&t>=0?t:r.length;return c(c(F(r,0,t),n),F(r,t))});var Vt=d(function yu(t,n){return n!=null&&n.constructor===t||n instanceof t});var Lt=v(function mu(t){if(_(t)){return true}if(!t){return false}if(typeof t!=="object"){return false}if(t instanceof String){return false}if(t.nodeType===1){return!!t.length}if(t.length===0){return true}if(t.length>0){return t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)}return false});var Wt=v(function bu(t){return Object(t).length===0});var Ft=v(function wu(t){return typeof t==="number"&&t!==t});var Rt=v(function xu(t){return t==null});var qt=v(function Eu(t){var n=t.length;var r=-1;while(++r<n){if(S(t,t[r],r+1)>=0){return false}}return true});var Bt=v(function ku(t){var n,r=[];for(n in t){r[r.length]=n}return r});var zt=d(function Ou(t,n){return A(n,t)});var Ut=v(function Su(t){return t!=null&&Vt(Number,t.length)?t.length:NaN});var Ht=d(function _u(t,n){var r=function(n){return t(n)};r.set=d(n);r.map=d(function(r,e){return n(r(t(e)),e)});return r});var $t=g(function Mu(t,n,r){var e=function(){return t(r)};e.set=n;e.map=function(e){return n(e(t(r)))};return e});var Xt=d(I);var Gt=d(function ju(t,n){return t<=n});var Kt=g(function Nu(t,n,r){var e=-1,i=r.length,u=[],o=[n];while(++e<i){o=t(o[0],r[e]);u[e]=o[1]}return[o[0],u]});var Zt=g(function Au(t,n,r){var e=r.length,i=[],u=[n];while(--e>=0){u=t(u[0],r[e]);i[e]=u[1]}return[u[0],i]});var Qt=d(function Iu(t,n){var r=-1,e=n.length,i=[];while(++r<e){i[r]=t(n[r],r,n)}return i});var Yt=d(function Tu(t,n){if(!M(t)){return NaN}if(!M(n)||n<1){return NaN}return(t%n+n)%n});var Jt=d(p(E));var tn=function(){var t=function(t){return t+"::"+Object.prototype.toString.call(t)};var n=function(n){return n.length+":{"+T(t,n).join(",")+"}"};return v(function r(t){var r={};return function(){var e=n(arguments);if(!k(e,r)){r[e]=t.apply(this,arguments)}return r[e]}})}();var nn=d(p(I));var rn=d(function Pu(t,n){return t%n});var en=d(P);var un=d(function(t,n){switch(t){case 0:return function(){return n.call(this)};case 1:return function(t){return n.call(this,t)};case 2:return function(t,r){return n.call(this,t,r)};case 3:return function(t,r,e){return n.call(this,t,r,e)};case 4:return function(t,r,e,i){return n.call(this,t,r,e,i)};case 5:return function(t,r,e,i,u){return n.call(this,t,r,e,i,u)};case 6:return function(t,r,e,i,u,o){return n.call(this,t,r,e,i,u,o)};case 7:return function(t,r,e,i,u,o,a){return n.call(this,t,r,e,i,u,o,a)};case 8:return function(t,r,e,i,u,o,a,s){return n.call(this,t,r,e,i,u,o,a,s)};case 9:return function(t,r,e,i,u,o,a,s,f){return n.call(this,t,r,e,i,u,o,a,s,f)};case 10:return function(t,r,e,i,u,o,a,s,f,c){return n.call(this,t,r,e,i,u,o,a,s,f,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}});var on=v(function Cu(t){return-t});var an=v(function Du(t){return!t});var sn=d(C);var fn=v(function Vu(t){return function(){return C(t,arguments)}});var cn=d(function Lu(t,n){return n.charAt(t<0?n.length+t:t)});var ln=d(function Wu(t,n){return n.charCodeAt(t<0?n.length+t:t)});var hn=v(function Fu(t){return[t]});var pn=d(function Ru(t,n){var r={};for(var e in n){if(S(t,e)<0){r[e]=n[e]}}return r});var vn=v(function qu(t){var n=false,r;return function(){if(n){return r}n=true;r=t.apply(this,arguments);return r}});var dn=d(function Bu(t,n){return t||n});var gn=d(D);var yn=g(function zu(t,n,r){return D(t,r)===n});var mn=d(function Uu(t,n){var r={};for(var e in n){if(S(t,e)>=0){r[e]=n[e]}}return r});var bn=d(function Hu(t,n){var r={};var e=-1;var i=t.length;while(++e<i){var u=t[e];r[u]=n[u]}return r});var wn=d(function $u(t,n){var r={};for(var e in n){if(t(n[e],e,n)){r[e]=n[e]}}return r});var xn=d(V);var En=d(function Xu(t,n){return n[t]});var kn=g(function Gu(t,n,r){return r[t]===n});var On=g(function Ku(t,n,r){return k(n,r)?r[n]:t});var Sn=d(function Zu(t,n){var r=t.length;var e=[];var i=-1;while(++i<r){e[i]=n[t[i]]}return e});var _n=d(function Qu(t,n){var r=[];var e=t;while(e<n){r[r.length]=e;e+=1}return r});var Mn=g(function Yu(t,n,r){var e=-1,i=r.length;while(++e<i){n=t(n,r[e],e,r)}return n});var jn=g(function Ju(t,n,r){var e=r.length;while(--e>=0){n=t(n,r[e])}return n});var Nn=g(function to(t,n,r){var e=r.length;while(--e>=0){n=t(n,r[e],e,r)}return n});var An=d(function no(t,n){return b(s(t),n)});var In=g(function ro(t,n,r){return c(F(r,0,Math.min(t,r.length)),F(r,Math.min(r.length,t+n)))});var Tn=g(function eo(t,n,r){return r.replace(t,n)});var Pn=v(function io(t){return F(t).reverse()});var Cn=g(function uo(t,n,r){var e=0,i=r.length+1,u=[n];while(++e<i){n=t(n,r[e-1]);u[e]=n}return u});var Dn=d(function oo(t,n){return F(n).sort(function(n,r){var e=t(n);var i=t(r);return e<i?-1:e>i?1:0})});var Vn=d(function ao(t,n){return n.indexOf(t)});var Ln=d(function(t,n){return n.lastIndexOf(t)});var Wn=d(function so(t,n){return t-n});var Fn=d(function fo(t,n){t(n);return n});var Rn=d(function co(t,n){return a(t).test(n)});var qn=d(function lo(t,n){var r=Number(n);var e=new Array(r);var i=0;while(i<r){e[i]=t(i);i+=1}return e});var Bn=v(function ho(t){var n=[];for(var r in t){if(k(r,t)){n[n.length]=[r,t[r]]}}return n});var zn=v(function po(t){var n=[];for(var r in t){n[n.length]=[r,t[r]]}return n});var Un=function(){var t="	\n\f\r   ᠎    "+"         　\u2028"+"\u2029\ufeff";var n="​";var r=typeof String.prototype.trim==="function";if(!r||(t.trim()||!n.trim())){return v(function e(n){var r=new RegExp("^["+t+"]["+t+"]*");var e=new RegExp("["+t+"]["+t+"]*$");return n.replace(r,"").replace(e,"")})}else{return v(function i(t){return t.trim()})}}();var Hn=v(function vo(t){return t===null?"Null":t===undefined?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});var $n=v(function go(t){return function(){return t(F(arguments))}});var Xn=v(function yo(t){return un(1,t)});var Gn=d(function mo(t,n){var r=t(n);var e=[];while(r&&r.length){e[e.length]=r[0];r=t(r[1])}return e});var Kn=d(function bo(t,n){var r=-1,e=n.length;var i=[],u;while(++r<e){u=n[r];if(!l(t,u,i)){i[i.length]=u}}return i});var Zn=v(function wo(t){var n,r=[];for(n in t){r[r.length]=t[n]}return r});var Qn=d(function xo(t,n){return vt(t.length,function(){return n.apply(this,c([t],arguments))})});var Yn=d(function Eo(t,n){var r=-1;var e=t.length;var i;var u=n.length;var o=[];while(++r<e){i=-1;while(++i<u){o[o.length]=[t[r],n[i]]}}return o});var Jn=d(function ko(t,n){var r=[];var e=-1;var i=Math.min(t.length,n.length);while(++e<i){r[e]=[t[e],n[e]]}return r});var tr=d(function Oo(t,n){var r=-1,e=t.length,i={};while(++r<e){i[t[r]]=n[r]}return i});var nr=g(function So(t,n,r){var e=[],i=-1,u=Math.min(n.length,r.length);while(++i<u){e[i]=t(n[i],r[i])}return e});var rr=tt(false);var er=tt(true);var ir=function _o(t,n){return c(n,[t])};var ur=function Mo(t,n,r){switch(t.length){case 0:return r;case 1:return o(t[0],n,r);default:return o(t[0],Mo(F(t,1),n,Object(r[t[0]])),r)}};var or=function jo(t,n,r){var e=function i(e){var i=n.length;var u=-1;while(++u<i){if(t===n[u]){return r[u]}}n[u+1]=t;r[u+1]=e;for(var o in t){e[o]=jo(t[o],n,r)}return e};switch(Hn(t)){case"Object":return e({});case"Array":return e([]);case"Date":return new Date(t);case"RegExp":return a(t);default:return t}};var ar=function No(t,n){return function(){var r=arguments.length;if(r===0){return n()}var e=arguments[r-1];return _(e)||typeof e[t]!=="function"?n.apply(this,arguments):e[t].apply(e,F(arguments,0,r-1))}};var sr=function Ao(t,n){return function(){var r=this;var e=n.apply(this,arguments);if(j(e)){return e.then(function(n){return t.call(r,n)})}else{return t.call(this,e)}}};var fr=function Io(t,n){return S(n,t)>=0};var cr=function To(t){return function(){var n=arguments.length-1;var r=arguments[n];var e=r.length;while(--n>=0){r=t(arguments[n],r)}return it(e,r)}};var lr=function Po(t,n){return v(function(r){var e=-1,i=n,u;while(++e<r.length){u=+r[e];if(t(u,i)){i=u}}return i})};var hr=function Co(t){return function(n){var r=F(arguments,1);return it(Math.max(0,n.length-r.length),function(){return n.apply(this,t(r,arguments))})}};var pr=function Do(t,n,r){return function(){var e=arguments.length;if(e===0){return r()}var i=arguments[e-1];if(!_(i)){var u=F(arguments,0,e-1);if(typeof i[t]==="function"){return i[t].apply(i,u)}if(N(i)){var o=n.apply(null,u);return o(i)}}return r.apply(this,arguments)}};var vr=function Vo(t,n){switch(t.length){case 0:return n;case 1:return y(t[0],n);default:var r=t[0];var e=F(t,1);return n[r]==null?n:o(r,Vo(e,n[r]),n)}};var dr=function Lo(t,n){return n!=null&&!_(n)&&typeof n[t]==="function"};var gr=function Wo(t){return function n(r){var e,i=[],u=-1,o,a=r.length,s;while(++u<a){if(Lt(r[u])){e=t?n(r[u]):r[u];o=-1;s=e.length;while(++o<s){i[i.length]=e[o]}}else{i[i.length]=r[u]}}return i}};var yr=function Fo(t,n){return T(En(t),n)};var mr=function(){function t(t,n,r){var e=-1,i=r.length;while(++e<i){n=t.step(n,r[e]);if(n&&n.__transducers_reduced__){n=n.value;break}}return t.result(n)}function n(t,n,r){var e=r.next();while(!e.done){n=t.step(n,e.value);if(n&&n.__transducers_reduced__){n=n.value;break}e=r.next()}return t.result(n)}function r(t,n,r){return t.result(r.reduce(ot(t.step,t),n))}var e=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator";return function i(u,o,a){if(typeof u==="function"){u=Y(u)}if(Lt(a)){return t(u,o,a)}if(typeof a.reduce==="function"){return r(u,o,a)}if(a[e]!=null){return n(u,o,a[e]())}if(typeof a.next==="function"){return n(u,o,a)}throw new TypeError("reduce: list must be array or iterable")}}();var br=function(){function t(t,n){this.xf=n;this.f=t;this.inputs={}}t.prototype.init=function(){return this.xf.init()};t.prototype.result=function(t){var n;for(n in this.inputs){if(k(n,this.inputs)){t=this.xf.step(t,this.inputs[n]);if(t.__transducers_reduced__){t=t.value;break}}}return this.xf.result(t)};t.prototype.step=function(t,n){var r=this.f(n);this.inputs[r]=this.inputs[r]||[r,[]];this.inputs[r][1]=ir(n,this.inputs[r][1]);return t};return d(function n(r,e){return new t(r,e)})}();var wr=d(pr("all",R,i));var xr=d(pr("any",q,u));var Er=d(ir);var kr=g(ur);var Or=v(function Ro(t){return un(2,t)});var Sr=v(function qo(t){return or(t,[],[])});var _r=cr(f);var Mr=cr(sr);var jr=d(function(t,n){if(_(n)){return c(t,n)}else if(dr("concat",t)){return t.concat(n)}else{throw new TypeError("can't concat "+typeof t)}});var Nr=d(fr);var Ar=vt(3,function(t){var n=F(arguments,1);return function(){var r=arguments;return t.apply(this,T(function(t){return t.apply(this,r)},n))}});var Ir=v(function Bo(t){return vt(t.length,t)});var Tr=d(function zo(t,n){var r=[];var e=-1;var i=t.length;while(++e<i){if(!fr(t[e],n)&&!fr(t[e],r)){r[r.length]=t[e]}}return r});var Pr=d(vr);var Cr=d(pr("drop",B,function Uo(t,n){return t<n.length?F(n,t):[]}));var Dr=d(pr("dropWhile",z,function Ho(t,n){var r=-1,e=n.length;while(++r<e&&t(n[r])){}return F(n,r)}));var Vr=v(function $o(t){return dr("empty",t)?t.empty():[]});var Lr=d(pr("filter",U,m));var Wr=d(pr("find",H,function Xo(t,n){var r=-1;var e=n.length;while(++r<e){if(t(n[r])){return n[r]}}}));var Fr=d(pr("findIndex",$,function Go(t,n){var r=-1;var e=n.length;while(++r<e){if(t(n[r])){return r}}return-1}));var Rr=d(pr("findLast",X,function Ko(t,n){var r=n.length;while(--r>=0){if(t(n[r])){return n[r]}}}));var qr=d(pr("findLastIndex",G,function Zo(t,n){var r=n.length;while(--r>=0){if(t(n[r])){return r}}return-1}));var Br=v(gr(true));var zr=v(function Qo(t){return Ir(function(n,r){var e=F(arguments);e[0]=r;e[1]=n;return t.apply(this,e)})});var Ur=Ir(function Yo(t,n){return n[t].apply(n,F(arguments,2))});var Hr=v(x(Bt));var $r=d(pr("groupBy",br,function Jo(t,n){return mr(function(n,r){var e=t(r);n[e]=ir(r,n[e]||(n[e]=[]));return n},{},n)}));var Xr=sn(0);var Gr=g(function ta(t,n,r){t=t<r.length&&t>=0?t:r.length;return c(ir(n,F(r,0,t)),F(r,t))});var Kr=g(function na(t,n,r){var e=[],i=-1;while(++i<n.length){if(l(t,n[i],r)){e[e.length]=n[i]}}return Kn(t,e)});var Zr=Ir(function ra(t,n,r){return r[t].apply(r,n)});var Qr=Ir(function ea(t,n){var r=F(arguments,2);var e=t-r.length;return vt(e+1,function(){var t=arguments[e];var i=r.concat(F(arguments,0,e));return t[n].apply(t,i)})});var Yr=Qr(1,"join");var Jr=function(){var t=!{toString:null}.propertyIsEnumerable("toString");var n=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];return v(function r(e){if(Object(e)!==e){return[]}if(Object.keys){return Object.keys(e)}var i,u=[],o;for(i in e){if(k(i,e)){u[u.length]=i}}if(t){o=n.length;while(--o>=0){i=n[o];if(k(i,e)&&!fr(i,u)){u[u.length]=i}}}return u})}();var te=sn(-1);var ne=d(pr("map",K,T));var re=d(function ia(t,n){return mr(function(r,e){r[e]=t(n[e]);return r},{},Jr(n))});var ee=d(function ua(t,n){return mr(function(r,e){r[e]=t(n[e],e,n);return r},{},Jr(n))});var ie=Qr(1,"match");var ue=lr(E,-Infinity);var oe=lr(I,Infinity);var ae=d(s(pr("any",q,u)));var se=Ir(hr(c));var fe=Ir(hr(zr(c)));var ce=d(function oa(t,n){return mr(function(n,r){var e=n[t(r)?0:1];e[e.length]=r;return n},[[],[]],n)});var le=function aa(){return _r.apply(this,Pn(arguments))};var he=function sa(){return Mr.apply(this,Pn(arguments))};var pe=d(yr);var ve=g(mr);var de=d(function fa(t,n){return Lr(s(t),n)});var ge=d(function ca(t,n){return qn(tt(t),n)});var ye=g(ar("slice",function la(t,n,r){return Array.prototype.slice.call(r,t,n)}));var me=d(function ha(t,n){return Sr(n).sort(t)});var be=Qr(1,"split");var we=ye;var xe=we(t,Infinity);var Ee=we(0);var ke=ve(e,0);var Oe=ar("tail",function(t){return F(t,1)});var Se=d(pr("take",Z,function pa(t,n){return F(n,0,Math.min(t,n.length))}));var _e=d(pr("takeWhile",Q,function va(t,n){var r=-1,e=n.length;while(++r<e&&t(n[r])){}return F(n,0,r)}));var Me=Qr(0,"toLowerCase");var je=Qr(0,"toUpperCase");var Ne=vt(4,function(t,n,r,e){return mr(t(typeof n==="function"?Y(n):n),r,e)});var Ae=g(function da(t,n,r){return Kn(t,c(n,r))});var Ie=v(function ga(t){var n=-1,r=t.length;var e=[],i;while(++n<r){i=t[n];if(!fr(i,e)){e[e.length]=i}}return e});var Te=v(gr(false));var Pe=Ir(function ya(t){var n=F(arguments,1);var r=n.length;return Ir(it(r,function(){var e=[],i=-1;while(++i<r){e[i]=n[i](arguments[i])}return t.apply(this,e.concat(F(arguments,r)))}))});var Ce=v(function ma(t){var n=Jr(t);var r=n.length;var e=[];var i=-1;while(++i<r){e[i]=t[n[i]]}return e});var De=d(function ba(t,n){var r=$r(function(n){return typeof t[n]==="function"?"fn":"obj"},Jr(t));return W(t,r,n)});var Ve=function wa(t,n,r,e){var i=Hn(t);if(i!==Hn(n)){return false}if(xt(t,n)){return true}if(i=="RegExp"){return t.source===n.source&&t.global===n.global&&t.ignoreCase===n.ignoreCase&&t.multiline===n.multiline&&t.sticky===n.sticky&&t.unicode===n.unicode}if(Object(t)===t){if(i==="Date"&&t.getTime()!=n.getTime()){return false}var u=Jr(t);if(u.length!==Jr(n).length){return false}var o=r.length;while(--o>=0){if(r[o]===t){return e[o]===n}}r[r.length]=t;e[e.length]=n;o=u.length;while(--o>=0){var a=u[o];if(!k(a,n)||!wa(n[a],t[a],r,e)){return false}}r.pop();e.pop();return true}return false};var Le=function xa(t,n){var r=Jr(n);var e=-1,i=r.length;while(++e<i){t[r[e]]=n[r[e]]}return t};var We=function Ea(t){return function(n){var r=function(){var r=arguments;return t(function(t){return t.apply(null,r)},n)};return arguments.length>1?r.apply(null,F(arguments,1)):it(ue(yr("length",n)),r)}};var Fe=Ir(We(i));var Re=Ir(We(u));var qe=d(function ka(t,n){return dr("ap",t)?t.ap(n):mr(function(t,r){return c(t,ne(r,n))},[],t)});var Be=Ir(function Oa(t){return t.apply(this,F(arguments,1))});var ze=d(ar("chain",function Sa(t,n){return Te(T(t,n))}));var Ue=Qr(1,"charAt");var He=Qr(1,"charCodeAt");var $e=g(function _a(t,n,r){function e(n,r){return qe(ne(Er,t(r)),n)}return mr(e,n([]),r)});var Xe=d(function Ma(t,n){if(t>10){throw new Error("Constructor with greater than ten arguments")}if(t===0){return function(){return new n}}return Ir(un(t,function(t,r,e,i,u,o,a,s,f,c){switch(arguments.length){case 1:return new n(t);case 2:return new n(t,r);case 3:return new n(t,r,e);case 4:return new n(t,r,e,i);case 5:return new n(t,r,e,i,u);case 6:return new n(t,r,e,i,u,o);case 7:return new n(t,r,e,i,u,o,a);case 8:return new n(t,r,e,i,u,o,a,s);case 9:return new n(t,r,e,i,u,o,a,s,f);case 10:return new n(t,r,e,i,u,o,a,s,f,c)}}))});var Ge=d(function ja(t,n){return Ve(t,n,[],[])});var Ke=d(function Na(t,n){return Le(Le({},n),ee(function(t,r){return t(n[r])},t))});var Ze=v(x(Jr));var Qe=ye(0,-1);var Ye=d(function Aa(t,n){return Ie(m(zr(fr)(t),n))});var Je=v(function Ia(t){var n=Jr(t);var r=n.length;var e=-1;var i={};while(++e<r){var u=n[e];var o=t[u];var a=k(o,i)?i[o]:i[o]=[];a[a.length]=u}return i});var ti=v(function Ta(t){var n=Jr(t);var r=n.length;var e=-1;var i={};while(++e<r){var u=n[e];i[t[u]]=u}return i});var ni=d(function Pa(t,n){var r=vt(t,n);return vt(t,function(){return mr(qe,ne(r,arguments[0]),F(arguments,1))})});var ri=d(function Ca(t,n){return Le(Le({},t),n)});var ei=v(function Da(t){return ve(ri,{},t)});var ii=ve(P,1);var ui=Pe(T,bn,It);var oi=d(_r(Ie,c));var ai=function(){var t={init:Array,step:function(t,n){return c(t,[n])},result:O};var n={init:String,step:e,result:O};var r={init:Object,step:function(t,n){return ri(t,Lt(n)?h(n[0],n[1]):n)},result:O};return function i(e){if(N(e)){return e}if(Lt(e)){return t}if(typeof e==="string"){return n}if(typeof e==="object"){return r}throw new Error("Cannot create transformer for "+e)}}();var si=$e(ne(It));var fi=v(function Va(t){return Xe(t.length,t)});var ci=g(function La(t,n,r){return N(t)?mr(n(t),t.init(),r):mr(n(ai(t)),t,r)});var li=v(function Wa(t){return ni(t.length,t)});var hi={F:rr,T:er,__:t,add:J,all:wr,allPass:Fe,always:tt,and:nt,any:xr,anyPass:Re,ap:qe,aperture:rt,append:Er,apply:et,arity:it,assoc:ut,assocPath:kr,binary:Or,bind:ot,both:at,call:Be,chain:ze,charAt:Ue,charCodeAt:He,clone:Sr,commute:si,commuteMap:$e,comparator:st,complement:ft,compose:_r,composeP:Mr,concat:jr,cond:ct,construct:fi,constructN:Xe,contains:Nr,containsWith:lt,converge:Ar,countBy:ht,createMapEntry:pt,curry:Ir,curryN:vt,dec:dt,defaultTo:gt,difference:Tr,differenceWith:yt,dissoc:mt,dissocPath:Pr,divide:bt,drop:Cr,dropWhile:Dr,either:wt,empty:Vr,eq:xt,eqDeep:Ge,eqProps:Et,evolve:Ke,filter:Lr,filterIndexed:kt,find:Wr,findIndex:Fr,findLast:Rr,findLastIndex:qr,flatten:Br,flip:zr,forEach:Ot,forEachIndexed:St,fromPairs:_t,func:Ur,functions:Ze,functionsIn:Hr,groupBy:$r,gt:Mt,gte:jt,has:Nt,hasIn:At,head:Xr,identity:It,ifElse:Tt,inc:Pt,indexOf:Ct,init:Qe,insert:Gr,insertAll:Dt,intersection:Ye,intersectionWith:Kr,into:ci,invert:Je,invertObj:ti,invoke:Zr,invoker:Qr,is:Vt,isArrayLike:Lt,isEmpty:Wt,isNaN:Ft,isNil:Rt,isSet:qt,join:Yr,keys:Jr,keysIn:Bt,last:te,lastIndexOf:zt,length:Ut,lens:Ht,lensOn:$t,lift:li,liftN:ni,lt:Xt,lte:Gt,map:ne,mapAccum:Kt,mapAccumRight:Zt,mapIndexed:Qt,mapObj:re,mapObjIndexed:ee,match:ie,mathMod:Yt,max:ue,maxBy:Jt,memoize:tn,merge:ri,mergeAll:ei,min:oe,minBy:nn,modulo:rn,multiply:en,nAry:un,negate:on,none:ae,not:an,nth:sn,nthArg:fn,nthChar:cn,nthCharCode:ln,of:hn,omit:pn,once:vn,or:dn,partial:se,partialRight:fe,partition:ce,path:gn,pathEq:yn,pick:mn,pickAll:bn,pickBy:wn,pipe:le,pipeP:he,pluck:pe,prepend:xn,product:ii,project:ui,prop:En,propEq:kn,propOr:On,props:Sn,range:_n,reduce:ve,reduceIndexed:Mn,reduceRight:jn,reduceRightIndexed:Nn,reject:de,rejectIndexed:An,remove:In,repeat:ge,replace:Tn,reverse:Pn,scan:Cn,slice:ye,sort:me,sortBy:Dn,split:be,strIndexOf:Vn,strLastIndexOf:Ln,substring:we,substringFrom:xe,substringTo:Ee,subtract:Wn,sum:ke,tail:Oe,take:Se,takeWhile:_e,tap:Fn,test:Rn,times:qn,toLower:Me,toPairs:Bn,toPairsIn:zn,toUpper:je,transduce:Ne,trim:Un,type:Hn,unapply:$n,unary:Xn,unfold:Gn,union:oi,unionWith:Ae,uniq:Ie,uniqWith:Kn,unnest:Te,useWith:Pe,values:Ce,valuesIn:Zn,where:De,wrap:Qn,xprod:Yn,zip:Jn,zipObj:tr,zipWith:nr};if(typeof r==="object"){n.exports=hi}else if(typeof define==="function"&&define.amd){define(function(){return hi})}else{this.R=hi}}).call(this)},{}],5:[function(t,n,r){var e=t("./vdom/create-element.js");n.exports=e},{"./vdom/create-element.js":18}],6:[function(t,n,r){var e=t("./vtree/diff.js");n.exports=e},{"./vtree/diff.js":38}],7:[function(t,n,r){var e=t("./virtual-hyperscript/index.js");n.exports=e},{"./virtual-hyperscript/index.js":25}],8:[function(t,n,r){var e=t("./diff.js");var i=t("./patch.js");var u=t("./h.js");var o=t("./create-element.js");var a=t("./vnode/vnode.js");var s=t("./vnode/vtext.js");n.exports={diff:e,patch:i,h:u,create:o,VNode:a,VText:s}},{"./create-element.js":5,"./diff.js":6,"./h.js":7,"./patch.js":16,"./vnode/vnode.js":34,"./vnode/vtext.js":36}],9:[function(t,n,r){n.exports=function e(t){var n=String.prototype.split,r=/()??/.exec("")[1]===t,e;e=function(e,i,u){if(Object.prototype.toString.call(i)!=="[object RegExp]"){return n.call(e,i,u)}var o=[],a=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),s=0,i=new RegExp(i.source,a+"g"),f,c,l,h;e+="";if(!r){f=new RegExp("^"+i.source+"$(?!\\s)",a)}u=u===t?-1>>>0:u>>>0;while(c=i.exec(e)){l=c.index+c[0].length;if(l>s){o.push(e.slice(s,c.index));if(!r&&c.length>1){c[0].replace(f,function(){for(var n=1;n<arguments.length-2;n++){if(arguments[n]===t){c[n]=t}}})}if(c.length>1&&c.index<e.length){Array.prototype.push.apply(o,c.slice(1))}h=c[0].length;s=l;if(o.length>=u){break}}if(i.lastIndex===c.index){i.lastIndex++}}if(s===e.length){if(h||!i.test("")){o.push("")}}else{o.push(e.slice(s))}return o.length>u?o.slice(0,u):o};return e}()},{}],10:[function(t,n,r){"use strict";var e=t("individual/one-version");var i="7";e("ev-store",i);var u="__EV_STORE_KEY@"+i;n.exports=o;function o(t){var n=t[u];if(!n){n=t[u]={}}return n}},{"individual/one-version":12}],11:[function(t,n,r){(function(t){"use strict";var r=typeof window!=="undefined"?window:typeof t!=="undefined"?t:{};n.exports=e;function e(t,n){if(t in r){return r[t]}r[t]=n;return n}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(t,n,r){"use strict";var e=t("./index.js");n.exports=i;function i(t,n,r){var i="__INDIVIDUAL_ONE_VERSION_"+t;var u=i+"_ENFORCE_SINGLETON";var o=e(u,n);if(o!==n){throw new Error("Can only have one copy of "+t+".\n"+"You already have version "+o+" installed.\n"+"This means you cannot install version "+n)}return e(i,r)}},{"./index.js":11}],13:[function(t,n,r){(function(r){var e=typeof r!=="undefined"?r:typeof window!=="undefined"?window:{};var i=t("min-document");if(typeof document!=="undefined"){n.exports=document}else{var u=e["__GLOBAL_DOCUMENT_CACHE@4"];if(!u){u=e["__GLOBAL_DOCUMENT_CACHE@4"]=i}n.exports=u}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"min-document":3}],14:[function(t,n,r){"use strict";n.exports=function e(t){return typeof t==="object"&&t!==null}},{}],15:[function(t,n,r){var e=Array.isArray;var i=Object.prototype.toString;n.exports=e||u;function u(t){return i.call(t)==="[object Array]"}},{}],16:[function(t,n,r){var e=t("./vdom/patch.js");n.exports=e},{"./vdom/patch.js":21}],17:[function(t,n,r){var e=t("is-object");var i=t("../vnode/is-vhook.js");n.exports=u;function u(t,n,r){for(var u in n){var s=n[u];if(s===undefined){o(t,u,s,r)}else if(i(s)){o(t,u,s,r);if(s.hook){s.hook(t,u,r?r[u]:undefined)}}else{if(e(s)){a(t,n,r,u,s)}else{t[u]=s}}}}function o(t,n,r,e){if(e){var u=e[n];if(!i(u)){if(n==="attributes"){for(var o in u){t.removeAttribute(o)}}else if(n==="style"){for(var a in u){t.style[a]=""}}else if(typeof u==="string"){t[n]=""}else{t[n]=null}}else if(u.unhook){u.unhook(t,n,r)}}}function a(t,n,r,i,u){var o=r?r[i]:undefined;if(i==="attributes"){for(var a in u){var f=u[a];if(f===undefined){t.removeAttribute(a)}else{t.setAttribute(a,f)}}return}if(o&&e(o)&&s(o)!==s(u)){t[i]=u;return}if(!e(t[i])){t[i]={}}var c=i==="style"?"":undefined;for(var l in u){var h=u[l];t[i][l]=h===undefined?c:h}}function s(t){if(Object.getPrototypeOf){return Object.getPrototypeOf(t)}else if(t.__proto__){return t.__proto__}else if(t.constructor){return t.constructor.prototype}}},{"../vnode/is-vhook.js":29,"is-object":14}],18:[function(t,n,r){var e=t("global/document");var i=t("./apply-properties");var u=t("../vnode/is-vnode.js");var o=t("../vnode/is-vtext.js");var a=t("../vnode/is-widget.js");var s=t("../vnode/handle-thunk.js");n.exports=f;function f(t,n){var r=n?n.document||e:e;var c=n?n.warn:null;t=s(t).a;if(a(t)){return t.init()}else if(o(t)){return r.createTextNode(t.text)}else if(!u(t)){if(c){c("Item is not a valid virtual dom node",t)}return null}var l=t.namespace===null?r.createElement(t.tagName):r.createElementNS(t.namespace,t.tagName);var h=t.properties;i(l,h);var p=t.children;for(var v=0;v<p.length;v++){var d=f(p[v],n);if(d){l.appendChild(d)}}return l}},{"../vnode/handle-thunk.js":27,"../vnode/is-vnode.js":30,"../vnode/is-vtext.js":31,"../vnode/is-widget.js":32,"./apply-properties":17,"global/document":13}],19:[function(t,n,r){var e={};n.exports=i;function i(t,n,r,e){if(!r||r.length===0){return{}}else{r.sort(a);return u(t,n,r,e,0)}}function u(t,n,r,i,a){i=i||{};if(t){if(o(r,a,a)){i[a]=t}var s=n.children;if(s){var f=t.childNodes;for(var c=0;c<n.children.length;c++){a+=1;var l=s[c]||e;var h=a+(l.count||0);if(o(r,a,h)){u(f[c],l,r,i,a)}a=h}}}return i}function o(t,n,r){if(t.length===0){return false}var e=0;var i=t.length-1;var u;var o;while(e<=i){u=(i+e)/2>>0;o=t[u];if(e===i){return o>=n&&o<=r}else if(o<n){e=u+1}else if(o>r){i=u-1}else{return true}}return false}function a(t,n){return t>n?1:-1}},{}],20:[function(t,n,r){var e=t("./apply-properties");var i=t("../vnode/is-widget.js");var u=t("../vnode/vpatch.js");var o=t("./create-element");var a=t("./update-widget");n.exports=s;function s(t,n,r){var i=t.type;var o=t.vNode;var a=t.patch;switch(i){case u.REMOVE:return f(n,o);case u.INSERT:return c(n,a,r);case u.VTEXT:return l(n,o,a,r);case u.WIDGET:return h(n,o,a,r);case u.VNODE:return p(n,o,a,r);case u.ORDER:d(n,a);return n;case u.PROPS:e(n,a,o.properties);return n;case u.THUNK:return g(n,r.patch(n,a,r));default:return n}}function f(t,n){var r=t.parentNode;if(r){r.removeChild(t)}v(t,n);return null}function c(t,n,r){var e=o(n,r);if(t){t.appendChild(e)}return t}function l(t,n,r,e){var i;if(t.nodeType===3){t.replaceData(0,t.length,r.text);i=t}else{var u=t.parentNode;i=o(r,e);if(u&&i!==t){u.replaceChild(i,t)}}return i}function h(t,n,r,e){var i=a(n,r);var u;if(i){u=r.update(n,t)||t}else{u=o(r,e)}var s=t.parentNode;if(s&&u!==t){s.replaceChild(u,t)}if(!i){v(t,n)}return u}function p(t,n,r,e){var i=t.parentNode;var u=o(r,e);if(i&&u!==t){i.replaceChild(u,t)}return u}function v(t,n){if(typeof n.destroy==="function"&&i(n)){n.destroy(t)}}function d(t,n){var r=t.childNodes;var e={};var i;var u;var o;for(var a=0;a<n.removes.length;a++){u=n.removes[a];i=r[u.from];if(u.key){e[u.key]=i}t.removeChild(i)}var s=r.length;for(var f=0;f<n.inserts.length;f++){o=n.inserts[f];i=e[o.key];t.insertBefore(i,o.to>=s++?null:r[o.to])}}function g(t,n){if(t&&n&&t!==n&&t.parentNode){t.parentNode.replaceChild(n,t)}return n}},{"../vnode/is-widget.js":32,"../vnode/vpatch.js":35,"./apply-properties":17,"./create-element":18,"./update-widget":22}],21:[function(t,n,r){var e=t("global/document");var i=t("x-is-array");var u=t("./dom-index");var o=t("./patch-op");n.exports=a;function a(t,n){return s(t,n)}function s(t,n,r){var i=c(n);if(i.length===0){return t}var o=u(t,n.a,i);var a=t.ownerDocument;if(!r){r={patch:s};if(a!==e){r.document=a}}for(var l=0;l<i.length;l++){var h=i[l];t=f(t,o[h],n[h],r)}return t}function f(t,n,r,e){if(!n){return t}var u;if(i(r)){for(var a=0;a<r.length;a++){u=o(r[a],n,e);if(n===t){t=u}}}else{u=o(r,n,e);if(n===t){t=u}}return t}function c(t){var n=[];for(var r in t){if(r!=="a"){n.push(Number(r))}}return n}},{"./dom-index":19,"./patch-op":20,"global/document":13,"x-is-array":15}],22:[function(t,n,r){var e=t("../vnode/is-widget.js");n.exports=i;function i(t,n){if(e(t)&&e(n)){if("name"in t&&"name"in n){return t.id===n.id}else{return t.init===n.init}}return false}},{"../vnode/is-widget.js":32}],23:[function(t,n,r){"use strict";var e=t("ev-store");n.exports=i;function i(t){if(!(this instanceof i)){return new i(t)}this.value=t}i.prototype.hook=function(t,n){var r=e(t);var i=n.substr(3);r[i]=this.value};i.prototype.unhook=function(t,n){var r=e(t);var i=n.substr(3);r[i]=undefined}},{"ev-store":10}],24:[function(t,n,r){"use strict";n.exports=e;function e(t){if(!(this instanceof e)){return new e(t)}this.value=t}e.prototype.hook=function(t,n){if(t[n]!==this.value){t[n]=this.value}}},{}],25:[function(t,n,r){"use strict";

var e=t("x-is-array");var i=t("../vnode/vnode.js");var u=t("../vnode/vtext.js");var o=t("../vnode/is-vnode");var a=t("../vnode/is-vtext");var s=t("../vnode/is-widget");var f=t("../vnode/is-vhook");var c=t("../vnode/is-thunk");var l=t("./parse-tag.js");var h=t("./hooks/soft-set-hook.js");var p=t("./hooks/ev-hook.js");n.exports=v;function v(t,n,r){var e=[];var u,o,a,s;if(!r&&m(n)){r=n;o={}}o=o||n||{};u=l(t,o);if(o.hasOwnProperty("key")){a=o.key;o.key=undefined}if(o.hasOwnProperty("namespace")){s=o.namespace;o.namespace=undefined}if(u==="INPUT"&&!s&&o.hasOwnProperty("value")&&o.value!==undefined&&!f(o.value)){o.value=h(o.value)}g(o);if(r!==undefined&&r!==null){d(r,e,u,o)}return new i(u,o,e,a,s)}function d(t,n,r,i){if(typeof t==="string"){n.push(new u(t))}else if(y(t)){n.push(t)}else if(e(t)){for(var o=0;o<t.length;o++){d(t[o],n,r,i)}}else if(t===null||t===undefined){return}else{throw b({foreignObject:t,parentVnode:{tagName:r,properties:i}})}}function g(t){for(var n in t){if(t.hasOwnProperty(n)){var r=t[n];if(f(r)){continue}if(n.substr(0,3)==="ev-"){t[n]=p(r)}}}}function y(t){return o(t)||a(t)||s(t)||c(t)}function m(t){return typeof t==="string"||e(t)||y(t)}function b(t){var n=new Error;n.type="virtual-hyperscript.unexpected.virtual-element";n.message="Unexpected virtual child passed to h().\n"+"Expected a VNode / Vthunk / VWidget / string but:\n"+"got:\n"+w(t.foreignObject)+".\n"+"The parent vnode is:\n"+w(t.parentVnode);"\n"+"Suggested fix: change your `h(..., [ ... ])` callsite.";n.foreignObject=t.foreignObject;n.parentVnode=t.parentVnode;return n}function w(t){try{return JSON.stringify(t,null,"    ")}catch(n){return String(t)}}},{"../vnode/is-thunk":28,"../vnode/is-vhook":29,"../vnode/is-vnode":30,"../vnode/is-vtext":31,"../vnode/is-widget":32,"../vnode/vnode.js":34,"../vnode/vtext.js":36,"./hooks/ev-hook.js":23,"./hooks/soft-set-hook.js":24,"./parse-tag.js":26,"x-is-array":15}],26:[function(t,n,r){"use strict";var e=t("browser-split");var i=/([\.#]?[a-zA-Z0-9_:-]+)/;var u=/^\.|#/;n.exports=o;function o(t,n){if(!t){return"DIV"}var r=!n.hasOwnProperty("id");var o=e(t,i);var a=null;if(u.test(o[1])){a="DIV"}var s,f,c,l;for(l=0;l<o.length;l++){f=o[l];if(!f){continue}c=f.charAt(0);if(!a){a=f}else if(c==="."){s=s||[];s.push(f.substring(1,f.length))}else if(c==="#"&&r){n.id=f.substring(1,f.length)}}if(s){if(n.className){s.push(n.className)}n.className=s.join(" ")}return n.namespace?a:a.toUpperCase()}},{"browser-split":9}],27:[function(t,n,r){var e=t("./is-vnode");var i=t("./is-vtext");var u=t("./is-widget");var o=t("./is-thunk");n.exports=a;function a(t,n){var r=t;var e=n;if(o(n)){e=s(n,t)}if(o(t)){r=s(t,null)}return{a:r,b:e}}function s(t,n){var r=t.vnode;if(!r){r=t.vnode=t.render(n)}if(!(e(r)||i(r)||u(r))){throw new Error("thunk did not return a valid node")}return r}},{"./is-thunk":28,"./is-vnode":30,"./is-vtext":31,"./is-widget":32}],28:[function(t,n,r){n.exports=e;function e(t){return t&&t.type==="Thunk"}},{}],29:[function(t,n,r){n.exports=e;function e(t){return t&&(typeof t.hook==="function"&&!t.hasOwnProperty("hook")||typeof t.unhook==="function"&&!t.hasOwnProperty("unhook"))}},{}],30:[function(t,n,r){var e=t("./version");n.exports=i;function i(t){return t&&t.type==="VirtualNode"&&t.version===e}},{"./version":33}],31:[function(t,n,r){var e=t("./version");n.exports=i;function i(t){return t&&t.type==="VirtualText"&&t.version===e}},{"./version":33}],32:[function(t,n,r){n.exports=e;function e(t){return t&&t.type==="Widget"}},{}],33:[function(t,n,r){n.exports="2"},{}],34:[function(t,n,r){var e=t("./version");var i=t("./is-vnode");var u=t("./is-widget");var o=t("./is-thunk");var a=t("./is-vhook");n.exports=c;var s={};var f=[];function c(t,n,r,e,c){this.tagName=t;this.properties=n||s;this.children=r||f;this.key=e!=null?String(e):undefined;this.namespace=typeof c==="string"?c:null;var l=r&&r.length||0;var h=0;var p=false;var v=false;var d=false;var g;for(var y in n){if(n.hasOwnProperty(y)){var m=n[y];if(a(m)&&m.unhook){if(!g){g={}}g[y]=m}}}for(var b=0;b<l;b++){var w=r[b];if(i(w)){h+=w.count||0;if(!p&&w.hasWidgets){p=true}if(!v&&w.hasThunks){v=true}if(!d&&(w.hooks||w.descendantHooks)){d=true}}else if(!p&&u(w)){if(typeof w.destroy==="function"){p=true}}else if(!v&&o(w)){v=true}}this.count=l+h;this.hasWidgets=p;this.hasThunks=v;this.hooks=g;this.descendantHooks=d}c.prototype.version=e;c.prototype.type="VirtualNode"},{"./is-thunk":28,"./is-vhook":29,"./is-vnode":30,"./is-widget":32,"./version":33}],35:[function(t,n,r){var e=t("./version");i.NONE=0;i.VTEXT=1;i.VNODE=2;i.WIDGET=3;i.PROPS=4;i.ORDER=5;i.INSERT=6;i.REMOVE=7;i.THUNK=8;n.exports=i;function i(t,n,r){this.type=Number(t);this.vNode=n;this.patch=r}i.prototype.version=e;i.prototype.type="VirtualPatch"},{"./version":33}],36:[function(t,n,r){var e=t("./version");n.exports=i;function i(t){this.text=String(t)}i.prototype.version=e;i.prototype.type="VirtualText"},{"./version":33}],37:[function(t,n,r){var e=t("is-object");var i=t("../vnode/is-vhook");n.exports=u;function u(t,n){var r;for(var a in t){if(!(a in n)){r=r||{};r[a]=undefined}var s=t[a];var f=n[a];if(s===f){continue}else if(e(s)&&e(f)){if(o(f)!==o(s)){r=r||{};r[a]=f}else if(i(f)){r=r||{};r[a]=f}else{var c=u(s,f);if(c){r=r||{};r[a]=c}}}else{r=r||{};r[a]=f}}for(var l in n){if(!(l in t)){r=r||{};r[l]=n[l]}}return r}function o(t){if(Object.getPrototypeOf){return Object.getPrototypeOf(t)}else if(t.__proto__){return t.__proto__}else if(t.constructor){return t.constructor.prototype}}},{"../vnode/is-vhook":29,"is-object":14}],38:[function(t,n,r){var e=t("x-is-array");var i=t("../vnode/vpatch");var u=t("../vnode/is-vnode");var o=t("../vnode/is-vtext");var a=t("../vnode/is-widget");var s=t("../vnode/is-thunk");var f=t("../vnode/handle-thunk");var c=t("./diff-props");n.exports=l;function l(t,n){var r={a:t};h(t,n,r,0);return r}function h(t,n,r,e){if(t===n){return}var f=r[e];var l=false;if(s(t)||s(n)){g(t,n,r,e)}else if(n==null){if(!a(t)){v(t,r,e);f=r[e]}f=k(f,new i(i.REMOVE,t,n))}else if(u(n)){if(u(t)){if(t.tagName===n.tagName&&t.namespace===n.namespace&&t.key===n.key){var h=c(t.properties,n.properties);if(h){f=k(f,new i(i.PROPS,t,h))}f=p(t,n,r,f,e)}else{f=k(f,new i(i.VNODE,t,n));l=true}}else{f=k(f,new i(i.VNODE,t,n));l=true}}else if(o(n)){if(!o(t)){f=k(f,new i(i.VTEXT,t,n));l=true}else if(t.text!==n.text){f=k(f,new i(i.VTEXT,t,n))}}else if(a(n)){if(!a(t)){l=true}f=k(f,new i(i.WIDGET,t,n))}if(f){r[e]=f}if(l){v(t,r,e)}}function p(t,n,r,e,o){var a=t.children;var s=w(a,n.children);var f=s.children;var c=a.length;var l=f.length;var p=c>l?c:l;for(var v=0;v<p;v++){var d=a[v];var g=f[v];o+=1;if(!d){if(g){e=k(e,new i(i.INSERT,null,g))}}else{h(d,g,r,o)}if(u(d)&&d.count){o+=d.count}}if(s.moves){e=k(e,new i(i.ORDER,t,s.moves))}return e}function v(t,n,r){m(t,n,r);d(t,n,r)}function d(t,n,r){if(a(t)){if(typeof t.destroy==="function"){n[r]=k(n[r],new i(i.REMOVE,t,null))}}else if(u(t)&&(t.hasWidgets||t.hasThunks)){var e=t.children;var o=e.length;for(var f=0;f<o;f++){var c=e[f];r+=1;d(c,n,r);if(u(c)&&c.count){r+=c.count}}}else if(s(t)){g(t,null,n,r)}}function g(t,n,r,e){var u=f(t,n);var o=l(u.a,u.b);if(y(o)){r[e]=new i(i.THUNK,null,o)}}function y(t){for(var n in t){if(n!=="a"){return true}}return false}function m(t,n,r){if(u(t)){if(t.hooks){n[r]=k(n[r],new i(i.PROPS,t,b(t.hooks)))}if(t.descendantHooks||t.hasThunks){var e=t.children;var o=e.length;for(var a=0;a<o;a++){var f=e[a];r+=1;m(f,n,r);if(u(f)&&f.count){r+=f.count}}}}else if(s(t)){g(t,null,n,r)}}function b(t){var n={};for(var r in t){n[r]=undefined}return n}function w(t,n){var r=E(n);var e=r.keys;var i=r.free;if(i.length===n.length){return{children:n,moves:null}}var u=E(t);var o=u.keys;var a=u.free;if(a.length===t.length){return{children:n,moves:null}}var s=[];var f=0;var c=i.length;var l=0;for(var h=0;h<t.length;h++){var p=t[h];var v;if(p.key){if(e.hasOwnProperty(p.key)){v=e[p.key];s.push(n[v])}else{v=h-l++;s.push(null)}}else{if(f<c){v=i[f++];s.push(n[v])}else{v=h-l++;s.push(null)}}}var d=f>=i.length?n.length:i[f];for(var g=0;g<n.length;g++){var y=n[g];if(y.key){if(!o.hasOwnProperty(y.key)){s.push(y)}}else if(g>=d){s.push(y)}}var m=s.slice();var b=0;var w=[];var k=[];var O;for(var S=0;S<n.length;){var _=n[S];O=m[b];while(O===null&&m.length){w.push(x(m,b,null));O=m[b]}if(!O||O.key!==_.key){if(_.key){if(O&&O.key){if(e[O.key]!==S+1){w.push(x(m,b,O.key));O=m[b];if(!O||O.key!==_.key){k.push({key:_.key,to:S})}else{b++}}else{k.push({key:_.key,to:S})}}else{k.push({key:_.key,to:S})}S++}else if(O&&O.key){w.push(x(m,b,O.key))}}else{b++;S++}}while(b<m.length){O=m[b];w.push(x(m,b,O&&O.key))}if(w.length===l&&!k.length){return{children:s,moves:null}}return{children:s,moves:{removes:w,inserts:k}}}function x(t,n,r){t.splice(n,1);return{from:n,key:r}}function E(t){var n={};var r=[];var e=t.length;for(var i=0;i<e;i++){var u=t[i];if(u.key){n[u.key]=i}else{r.push(i)}}return{keys:n,free:r}}function k(t,n){if(t){if(e(t)){t.push(n)}else{t=[t,n]}return t}else{return n}}},{"../vnode/handle-thunk":27,"../vnode/is-thunk":28,"../vnode/is-vnode":30,"../vnode/is-vtext":31,"../vnode/is-widget":32,"../vnode/vpatch":35,"./diff-props":37,"x-is-array":15}],39:[function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t};var i=t("ramda");var u=t("virtual-dom");var o=t("virtual-dom/create-element");var a=e(o);function s(t,n,r){this.render=t.bind(this);this.props=n;this.tree=this.render(n);this.node=a(this.tree);r.appendChild(this.node)}s.prototype.setProps=function(t){this.props=i.merge(this.props,t);var n=this.render(this.props);this.node=u.patch(this.node,u.diff(this.tree,n));this.tree=n;return this};function f(t,n,r){return new s(t,n,r)}function c(t){return f.bind(null,t)}n.exports=c},{ramda:4,"virtual-dom":8,"virtual-dom/create-element":5}],40:[function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t};var i=t("virtual-dom");var u=t("./element");var o=e(u);function a(t){return i.h("div",{style:{"z-index":10,position:"absolute",padding:"5px 10px",backgroundColor:"white",display:t.visible?"block":"none",maxWidth:"100%",top:t.positionTop+"px"}},[i.h("span",{style:{"float":"left",padding:"10px",cursor:"pointer",fontFamily:"monospace"},onclick:t.onCloseClick.bind(this)},"X"),i.h("form",{action:"#",onsubmit:t.onRenameSubmit.bind(this)},i.h("input",{style:{width:"100%","float":"left"},value:t.original?t.original.replace(/\/.*\//,""):""})),i.h("a",{style:{"float":"left",maxWidth:"inherit"},target:"_blank",href:t.href},[i.h("img",{style:{"float":"left",maxWidth:"inherit"},src:t.href})]),i.h("input",{style:{width:"100%","float":"left"},onclick:t.onInputClick.bind(this),readOnly:true,value:t.href})])}n.exports=o(a)},{"./element":39,"virtual-dom":8}],41:[function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t};var i=t("ramda");var u=e(i);var o=t("virtual-dom");var a=t("./element");var s=e(a);function f(t,n,r){t.push({type:n,ev:r})}function c(t){if(!t.hasThumbnail){return o.h()}var n=localStorage.getItem("cachedImg-"+t.versionTag);var r;var e;var i;if(n){r=n}else{i="anonymous";r=t.client.thumbnailUrl(t.path,{png:true});e=f.bind(null,t.actionStream,"thumbnailLoaded")}return o.h("div",{className:"tile",onclick:f.bind(null,t.actionStream,"thumbnailClicked")},o.h("img",{onload:e,crossOrigin:i,dataset:{original:t.path,versiontag:t.versionTag},src:r}))}function l(t){var n=t.actionStream;var r=t.offset;return o.h("div",{className:"tile",onclick:function e(t){n.push({type:"displayMore",ev:t,offset:r})}},o.h("span",{style:{padding:"10px"}},"+"))}function h(t){var n=t.thumbnails;var r=t.client;var e=t.actionStream;var i=t.more;if(!n){return o.h("div")}var a=n.length;return o.h("div",{},[n.map(u.pipe(u.merge({client:r,actionStream:e}),c)),t.more?l({actionStream:e,offset:a}):""])}n.exports=s(h)},{"./element":39,ramda:4,"virtual-dom":8}],42:[function(t,n,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.bazFunc=i;var e=t("virtual-dom");function i(t,n,r){var e=document.createElement("form");e.action="#";e.onsubmit=function(t){n.push({type:"searchSubmit",ev:t});return false};var i=document.createElement("input");i.style.width="60%";i.style.margin="10px auto";i.style.display="block";e.appendChild(i);r.appendChild(e)}},{"virtual-dom":8}],43:[function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t};var i=function(t,n){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){var r=[];var e=true;var i=false;var u=undefined;try{for(var o=t[Symbol.iterator](),a;!(e=(a=o.next()).done);e=true){r.push(a.value);if(n&&r.length===n)break}}catch(s){i=true;u=s}finally{try{if(!e&&o["return"])o["return"]()}finally{if(i)throw u}}return r}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}};var u=t("ramda");var o=e(u);var a=t("bazooka");var s=e(a);var f=t("baconjs");var c=e(f);var l=t("./store");var h=e(l);var p=t("./elements/modal");var v=e(p);var d=t("./elements/pane");var g=e(d);var y=t("./elements/search");var m=new Dropbox.Client({key:"0vbn09clhc23rc5"});var b="/Public/gifmess/";var w=new c.Bus;var x=new c.Bus;var E=h("default");w.filter(o.propEq("type","searchSubmit")).map(".ev.target.0").name("searchField").doAction(function(t){t.style.backgroundColor="white"}).map(".value").flatMap(o.flip(o.or)(new c.Error("Empty query"))).map(".toLowerCase").name("query").map(function(t){try{return[t,new RegExp(t,"i")]}catch(n){return[t,null]}}).combine(E.pull.map(".cachedEntries"),function(t,n){var r=i(t,2);var e=r[0];var u=r[1];return o.filter(o.pipe(o.prop("name"),o.toLower,o.anyPass([o.contains(e),u?u.test.bind(u):o.F])),n)}).flatMap(o.cond([o.is(c.Error),o.identity],[o.length,o.identity],[o.T,o.always(new c.Error("Empty results"))])).map(o.of).flatMapError(function(t){if(t==="Empty query"){return E.pull.map(".cachedEntries").map(o.of).map(o.ap([o.slice(0,50),o.pipe(o.length,o.lt(50))]))}return new c.Error(t)}).onValue(N).onError(o.cond([o.eq("Empty results"),console.error.bind(console)]));function k(t){var n=document.createElement("canvas");var r=n.getContext("2d");n.height=t.height;n.width=t.width;r.drawImage(t,0,0);localStorage.setItem("cachedImg-"+t.dataset.versiontag,n.toDataURL("image/png"));r=n=null}w.filter(o.propEq("type","thumbnailLoaded")).map(".ev.target").onValue(k);function O(t){var n="cachedShare-"+t.dataset.versiontag;var r=localStorage.getItem(n);if(r){M(r,t.dataset.original)}else{m.makeUrl(t.dataset.original,{downloadHack:true},function(r,e){M(e.url,t.dataset.original);localStorage.setItem(n,e.url)})}}w.filter(o.propEq("type","thumbnailClicked")).map(".ev.target").onValue(O);E.pull.map(".cachedEntries").sampledBy(w.filter(o.propEq("type","displayMore")).map(".offset").map(o.add(50)),function(t,n){return[o.slice(0,n,t),t.length>n]}).onValue(N);function S(t,n){var r=document.querySelector('img[data-original="'+t+'"]');if(r){r.dataset.original=n.path;r.dataset.versiontag=n.versionTag}}var _=v({onCloseClick:function I(){this.setProps({visible:false})},onInputClick:function T(t){t.target.select()},onRenameSubmit:function P(t){var n=this;var r=t.target[0].value;var e=this.props.original;if(!r){return false}m.move(e,b+r,function(t,r){if(t){n.setProps({original:n.props.original});return}A().doAction(S.bind(null,n.props.original,r));n.setProps({original:r.path,visible:false})});return false}},document.body);function M(t,n){_.setProps({href:t,original:n,visible:true,positionTop:window.scrollY+10})}(function(){var t=document.createElement("style");t.type="text/css";t.innerHTML="\n      .tile {\n        width: 64px; height: 64px; background-color: white;\n        margin: 3px;\n        float: left; text-align: center;\n        cursor: pointer;\n      }\n    ";document.head.appendChild(t);document.body.style.backgroundColor="#DFFEE3";document.body.style.margin="0"})();var j=g({client:m,actionStream:w},document.body);m.authenticate();function N(t){var n=i(t,2);var r=n[0];var e=n[1];j.setProps({thumbnails:r,more:e})}function A(){return c.fromCallback(function(t){m.readdir(b,function(n,r,e,i){return t({err:n,files:r,folder:e,entries:i})})}).map(".entries").map(o.sortBy(o.prop("clientModifiedAt"))).map(o.reverse).doAction(o.pipe(o.createMapEntry("cachedEntries"),E.push))}A().map(o.of).map(o.ap([o.slice(0,50),o.pipe(o.length,o.lt(50))])).onValue(N);s.register({search:y.bazFunc.bind(null,x,w)});s.refresh()},{"./elements/modal":40,"./elements/pane":41,"./elements/search":42,"./store":44,baconjs:1,bazooka:2,ramda:4}],44:[function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t};var i=t("baconjs");var u=e(i);var o=t("ramda");function a(t){var n=new u.Bus;var r=n.scan({},o.merge);this.name=t;this.pull=r;this.push=n.push.bind(n)}var s={};function f(t){s[t]=s[t]||new a(t);return s[t]}n.exports=f},{baconjs:1,ramda:4}]},{},[43]);